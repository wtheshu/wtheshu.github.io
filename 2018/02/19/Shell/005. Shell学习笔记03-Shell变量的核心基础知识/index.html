<!DOCTYPE html>




<html class="theme-next mist" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">






  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.4">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.4" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="Shell," />


<meta name="description" content="GO   1. 什么是Shell变量1.1. 什么是变量简单地说，变量就是用一个固定的字符串（也可能是字符、数字等的组合）代替更多、更复杂的内容，该内容里可能还会包含变量、路径、字符串等其它的内容。 变量是暂时存储数据的地方及数据标记，所存储的数据存在于内存空间中，通过正确地调用内存空间中变量的名字就可以取出与变量对应的数据。使用变量的最大好处就是使程序开发更为方便，当然，在编程中使用变量也是必">
<meta name="keywords" content="Shell">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell学习笔记03-Shell变量的核心基础知识">
<meta property="og:url" content="http://www.theshu.top/2018/02/19/Shell/005. Shell学习笔记03-Shell变量的核心基础知识/index.html">
<meta property="og:site_name" content="奇怪先生的博客">
<meta property="og:description" content="GO   1. 什么是Shell变量1.1. 什么是变量简单地说，变量就是用一个固定的字符串（也可能是字符、数字等的组合）代替更多、更复杂的内容，该内容里可能还会包含变量、路径、字符串等其它的内容。 变量是暂时存储数据的地方及数据标记，所存储的数据存在于内存空间中，通过正确地调用内存空间中变量的名字就可以取出与变量对应的数据。使用变量的最大好处就是使程序开发更为方便，当然，在编程中使用变量也是必">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://ooww3ll01.bkt.clouddn.com/%E7%99%BB%E9%99%86Shell%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%96%87%E4%BB%B6%E7%9A%84%E6%B5%81%E7%A8%8B.png">
<meta property="og:updated_time" content="2018-02-28T05:01:07.028Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shell学习笔记03-Shell变量的核心基础知识">
<meta name="twitter:description" content="GO   1. 什么是Shell变量1.1. 什么是变量简单地说，变量就是用一个固定的字符串（也可能是字符、数字等的组合）代替更多、更复杂的内容，该内容里可能还会包含变量、路径、字符串等其它的内容。 变量是暂时存储数据的地方及数据标记，所存储的数据存在于内存空间中，通过正确地调用内存空间中变量的名字就可以取出与变量对应的数据。使用变量的最大好处就是使程序开发更为方便，当然，在编程中使用变量也是必">
<meta name="twitter:image" content="http://ooww3ll01.bkt.clouddn.com/%E7%99%BB%E9%99%86Shell%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%96%87%E4%BB%B6%E7%9A%84%E6%B5%81%E7%A8%8B.png">






  <link rel="canonical" href="http://www.theshu.top/2018/02/19/Shell/005. Shell学习笔记03-Shell变量的核心基础知识/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>Shell学习笔记03-Shell变量的核心基础知识 | 奇怪先生的博客</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">奇怪先生的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">耳目得来终觉浅，觉知此事要躬行。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.theshu.top/2018/02/19/Shell/005. Shell学习笔记03-Shell变量的核心基础知识/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="奇怪先生theshu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/head_me.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="奇怪先生的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Shell学习笔记03-Shell变量的核心基础知识</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-19T12:36:39+08:00">2018-02-19</time>
            

            
            
              
                
              
            

            
              
              <span class="post-meta-divider">|</span>
              

              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-02-28T13:01:07+08:00">2018-02-28</time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>GO</p>
</blockquote>
<hr>
<h1 id="1-什么是Shell变量"><a href="#1-什么是Shell变量" class="headerlink" title="1. 什么是Shell变量"></a>1. 什么是Shell变量</h1><h2 id="1-1-什么是变量"><a href="#1-1-什么是变量" class="headerlink" title="1.1. 什么是变量"></a>1.1. 什么是变量</h2><p>简单地说，变量就是用一个固定的字符串（也可能是字符、数字等的组合）代替更多、更复杂的内容，该内容里可能还会包含变量、路径、字符串等其它的内容。</p>
<p>变量是暂时存储数据的地方及数据标记，所存储的数据存在于内存空间中，通过正确地调用内存空间中变量的名字就可以取出与变量对应的数据。使用变量的最大好处就是使程序开发更为方便，当然，在编程中使用变量也是必须的，否则就很难完成相关的程序开发工作。</p>
<p>下面是定义变量和打印变量的示例：<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@theshu</span> ~]<span class="meta"># theshu=<span class="string">"I am theshu"</span> #&lt;==定义变量，名字为theshu，对应的内容为<span class="string">"I am theshu"</span></span></div><div class="line">[root<span class="symbol">@theshu</span> ~]<span class="meta"># echo $theshu		#&lt;==打印变量的值</span></div><div class="line">I am theshu</div></pre></td></tr></table></figure></p>
<p>变量的赋值方式为：<code>变量名=值</code>，中间没有任何空格，通过echo命令加上<code>$变量名</code>即可输出变量的值，变量的内容一般要加双引号，以防止出错，特别是当值里的内容之间有空格时。</p>
<h2 id="1-2-Shell变量的特性"><a href="#1-2-Shell变量的特性" class="headerlink" title="1.2. Shell变量的特性"></a>1.2. Shell变量的特性</h2><p>默认情况下，在bash Shell中是不会区分变量类型的，例如：常见的变量类型为整数、字符串、小数等。这和其它强类型语言（例如： Java/C语言）是有区别的，当然，如果需要指定Shell变量的类型，也可以使用<code>declare</code>显示定义变量的类型，但在一般情况下没有这个需求，Shell开发者在开发脚本时需要自行注意Shell脚本中变量的类型，这对新手来说是个重点也是个难点。</p>
<h2 id="1-3-变量类型"><a href="#1-3-变量类型" class="headerlink" title="1.3. 变量类型"></a>1.3. 变量类型</h2><p>变量可分为两类：环境变量（全局变量）和普通变量（局部变量）。</p>
<p>环境变量也可称为全局变量，可以在创建它们的Shell及其派生出来的任意子进程Shell中使用，环境变量又可分为自定义环境变量和bash内置的环境变量。</p>
<p>普通变量也可称为局部变量，只能在创建它们的Shell函数或Shell脚本中使用。普通变量一般由开发脚本程序时创建。</p>
<h1 id="2-环境变量"><a href="#2-环境变量" class="headerlink" title="2. 环境变量"></a>2. 环境变量</h1><p>环境变量一般是指使用<code>export</code>内置命令导出的变量，用于定义Shell的运行环境，保证Shell命令的正确执行。Shell通过环境变量来确定<strong>登录用户名、命令路径、终端类型、登陆目录等</strong>，所有的环境变量都是系统全局变量，可用于所有子进程中，这包括编辑器，Shell脚本和各类应用。</p>
<p>环境变量可以在命令行中设置和创建，但用户退出命令行时这些变量值就会丢失，因此，如果希望永久保存环境变狼，可以在用户家目录下的<code>.bash_profile</code>或<code>.bashrc</code>（非用户登陆模式特有，例如远程SSH）文件中，或者全局配置<code>/etc/bashrc</code>（非用户登陆模式特有，例如远程SSH）或<code>/etc/profile</code>文件中定义。在将环境变量放入上述的文件中后，每次用户登陆时这些变量都将被初始化。</p>
<p>按照系统规范，所有环境变量的名字均采用大写形式。在将环境变量应用于用户进程程序之前，都应该用<code>export</code>命令导出定义，例如：正确的环境变量定义方法为：<code>export OLDGIRL=1</code></p>
<p>有一些环境变量，比如<code>HOME、PATH、SHELL、UID、USER</code>等，在用户登陆之前就已经被<code>/bin/login</code>程序设置好了。通常环境变量被定义并保存在用户家目录下的<code>.bash_profile</code>文件或全局的配置文件<code>/etc/profile</code>中。</p>
<p>在查看设置的变量时，有3个命令可以显示变量的值：<code>set</code>、<code>env</code>、<code>declare</code>（替代早期的typeset）。</p>
<ul>
<li><code>set</code>命令输出所有的变量，包括全局变量和局部变量；</li>
<li><code>env</code>命令只显示全局变量；</li>
<li><code>declare</code>命令输出所有的变量、函数、整数和已经导出的变量。</li>
<li><code>set -o</code>命令显示bash Shell的所有参数配置信息。</li>
</ul>
<p>例子：set、env和declare输出：<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">[root@theshu ~]<span class="comment"># env | tail</span></div><div class="line">MAIL=/var/spool/mail/root</div><div class="line">PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</div><div class="line">PWD=/root</div><div class="line">LANG=en_US.UTF-8</div><div class="line">HISTCONTROL=ignoredups</div><div class="line">SHLVL=1</div><div class="line">HOME=/root</div><div class="line">LOGNAME=root</div><div class="line">LESSOPEN=||/usr/bin/lesspipe.sh %s</div><div class="line">_=/bin/env</div><div class="line"></div><div class="line">[root@theshu ~]<span class="comment"># declare | tail</span></div><div class="line">SHELLOPTS=braceexpand:emacs:hashall:histexpand:history:interactive-comments:monitor</div><div class="line">SHLVL=1</div><div class="line">TERM=xterm</div><div class="line">UID=0</div><div class="line">USER=root</div><div class="line">XDG_SESSION_ID=3340</div><div class="line">_=</div><div class="line">colors=/root/.dircolors</div><div class="line">theshu='I am theshu'</div><div class="line">userdir=/root</div><div class="line"></div><div class="line">[root@theshu ~]<span class="comment"># set -o | head</span></div><div class="line">allexport       off</div><div class="line">braceexpand     on</div><div class="line">emacs           on</div><div class="line">errexit         off</div><div class="line">errtrace        off</div><div class="line">functrace       off</div><div class="line">hashall         on</div><div class="line">histexpand      on</div><div class="line">history         on</div><div class="line">ignoreeof       off</div></pre></td></tr></table></figure></p>
<h2 id="2-1-自定义环境变量"><a href="#2-1-自定义环境变量" class="headerlink" title="2.1. 自定义环境变量"></a>2.1. 自定义环境变量</h2><h3 id="2-1-1-设置环境变量"><a href="#2-1-1-设置环境变量" class="headerlink" title="2.1.1. 设置环境变量"></a>2.1.1. 设置环境变量</h3><p>利用<code>export</code>命令和<code>declare</code>命令设置环境变量的三种方法：</p>
<ol>
<li><code>export 变量名=值</code></li>
<li><code>变量名=值 ； export 变量名</code></li>
<li><code>declare -x 变量名=值</code></li>
</ol>
<p>下面介绍让环境变量永久生效的常用设置文件。</p>
<ol>
<li>用户的环境变量配置：<code>~/.bashrc</code>（推荐在此文件中优先设置）和<code>~/.bash_profile</code></li>
<li>全局环境变量的配置：<code>/etc/profile</code>、<code>/etc/bashrc</code>（推荐在此文件中优先设置）和<code>/etc/profile.d/</code></li>
<li>若要在登陆后初始化或显示加载内容，则把脚本文件放在<code>/etc/profile.d/</code>下即可（无需加执行权限）。</li>
</ol>
<h3 id="2-1-2-设置登陆提示的两种方式"><a href="#2-1-2-设置登陆提示的两种方式" class="headerlink" title="2.1.2. 设置登陆提示的两种方式"></a>2.1.2. 设置登陆提示的两种方式</h3><p>第一种是在<code>/etc/motd</code>里增加提示的字符串，如下：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@theshu ~]# cat /etc/motd</div><div class="line"></div><div class="line">Welcome <span class="keyword">to</span> Alibaba Cloud Elastic Compute<span class="built_in"> Service </span>!</div></pre></td></tr></table></figure></p>
<p>登录后显示内容如下：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">login as: theshu</div><div class="line">Authenticating with public key <span class="string">"rsa-key-20171224"</span></div><div class="line">Passphrase <span class="keyword">for</span> key <span class="string">"rsa-key-20171224"</span>:</div><div class="line">Last login: Sat Feb 24 10:39:52 2018 <span class="keyword">from</span> 116.117.102.109</div><div class="line"></div><div class="line">Welcome <span class="keyword">to</span> Alibaba Cloud Elastic Compute<span class="built_in"> Service </span>!</div></pre></td></tr></table></figure></p>
<p>第二种是在<code>/etc/profile.d/</code>下面增加如下脚本：<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@theshu ~]# <span class="keyword">cat</span> /etc/<span class="keyword">profile</span>.d/theshu.<span class="keyword">sh</span>  #&lt;==这里是脚本的内容</div><div class="line"><span class="keyword">echo</span> <span class="string">" Here is theshu training "</span></div></pre></td></tr></table></figure></p>
<p>以下是在生产场景下（在Java环境中），自定义环境变量的实例：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/application/jdk</div><div class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=<span class="variable">$CLASSPATH</span>:$JAVA_HOME/lib:$JAVA_HOME/jre/lib</div><div class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$JAVA_HOME</span>/bin:$JAVA_HOME/jre/bin:$PATH:$HOME/bin</div><div class="line"><span class="builtin-name">export</span> <span class="attribute">RESIN_HOME</span>=/application/resin</div></pre></td></tr></table></figure></p>
<p>提示：上述的环境变量设置通常放在<code>/etc/profile</code>全局环境变量里。如果是写Java的脚本，那么最好是把上述Java环境配置放入脚本内重新定义，特别是作为定时任务执行的脚本。</p>
<h2 id="2-2-显示与取消环境变量"><a href="#2-2-显示与取消环境变量" class="headerlink" title="2.2. 显示与取消环境变量"></a>2.2. 显示与取消环境变量</h2><h3 id="2-2-1-通过echo或printf命令打印环境变量"><a href="#2-2-1-通过echo或printf命令打印环境变量" class="headerlink" title="2.2.1. 通过echo或printf命令打印环境变量"></a>2.2.1. 通过echo或printf命令打印环境变量</h3><p>下面来查看一下常见的系统环境变量：</p>
<ul>
<li>$HOME：用户登陆时进入的目录</li>
<li>$UID：当前用户的UID（用户标识），相当于id-u</li>
<li>$PWD：当前工作目录的绝对路径名</li>
<li>$SHELL：当前SHELL</li>
<li>$USER：当前用户</li>
<li>……</li>
</ul>
<p>通过echo和printf命令打印环境变量：<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[root<span class="symbol">@theshu</span> ~]<span class="meta"># echo $HOME</span></div><div class="line">/root</div><div class="line">[root<span class="symbol">@theshu</span> ~]<span class="meta"># echo $UID</span></div><div class="line"><span class="number">0</span></div><div class="line">[root<span class="symbol">@theshu</span> ~]<span class="meta"># echo $PWD</span></div><div class="line">/root</div><div class="line">[root<span class="symbol">@theshu</span> ~]<span class="meta"># echo $SHELL</span></div><div class="line">/bin/bash</div><div class="line">[root<span class="symbol">@theshu</span> ~]<span class="meta"># echo $USER</span></div><div class="line">root</div><div class="line">[root<span class="symbol">@theshu</span> ~]<span class="meta"># printf <span class="string">"$HOME\n"</span></span></div><div class="line">/root</div><div class="line"><span class="meta">#&lt;==printf是一个更复杂的格式化打印内容的工具，一般不需要</span></div></pre></td></tr></table></figure></p>
<blockquote>
<p>提示：在写Shell脚本时可以直接使用系统默认的环境变量，一般情况下是不需要重新定义的，在使用定时任务等执行Shell脚本时建议在脚本中重新定义。</p>
</blockquote>
<h3 id="2-2-2-用env或set显示默认的环境变量"><a href="#2-2-2-用env或set显示默认的环境变量" class="headerlink" title="2.2.2. 用env或set显示默认的环境变量"></a>2.2.2. 用env或set显示默认的环境变量</h3><p>用<code>env（printenv）</code>显示默认环境变量的示例如下：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="attr">XDG_SESSION_ID</span>=<span class="number">3413</span></div><div class="line"><span class="attr">HOSTNAME</span>=theshu</div><div class="line"><span class="attr">SHELL</span>=/bin/bash</div><div class="line"><span class="attr">TERM</span>=xterm</div><div class="line"><span class="attr">HISTSIZE</span>=<span class="number">1000</span></div><div class="line"><span class="attr">USER</span>=root</div><div class="line"><span class="attr">MAIL</span>=/var/spool/mail/root</div><div class="line"><span class="attr">PATH</span>=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</div><div class="line"><span class="attr">PWD</span>=/root</div><div class="line"><span class="attr">LANG</span>=en_US.UTF-<span class="number">8</span></div><div class="line"><span class="attr">HISTCONTROL</span>=ignoredups</div><div class="line"><span class="attr">SHLVL</span>=<span class="number">1</span></div><div class="line"><span class="attr">HOME</span>=/root</div><div class="line"><span class="attr">LOGNAME</span>=root</div><div class="line"><span class="attr">LESSOPEN</span>=||/usr/bin/lesspipe.sh %s</div><div class="line"><span class="attr">_</span>=/bin/env</div></pre></td></tr></table></figure></p>
<p>用set也可以显示环境变量（包括局部变量），如下：<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[root@theshu ~]<span class="comment"># set</span></div><div class="line">BASH=/bin/bash</div><div class="line">BASHOPTS=checkwinsize:cmdhist:expand_aliases:extquote:force_fignore:histappend:hostcomplete:interactive_comments:login_shell:progcomp:promptvars:sourcepath</div><div class="line">BASH_ALIASES=()</div><div class="line">BASH_ARGC=()</div><div class="line">BASH_ARGV=()</div><div class="line">BASH_CMDS=()</div><div class="line">BASH_LINENO=()</div><div class="line">一下内容省略...</div></pre></td></tr></table></figure></p>
<h3 id="2-2-3-用unset消除本地变量和环境变量"><a href="#2-2-3-用unset消除本地变量和环境变量" class="headerlink" title="2.2.3. 用unset消除本地变量和环境变量"></a>2.2.3. 用unset消除本地变量和环境变量</h3><p>用<code>unset</code>消除本地变量和环境变量的示例如下：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@theshu ~]# echo <span class="variable">$USER</span></div><div class="line">root</div><div class="line">[root@theshu ~]# unset USER</div><div class="line">[root@theshu ~]# echo <span class="variable">$USER</span></div><div class="line">		#&lt;==可以看到此处为空</div></pre></td></tr></table></figure></p>
<h3 id="2-2-4-环境变量的知识小结："><a href="#2-2-4-环境变量的知识小结：" class="headerlink" title="2.2.4. 环境变量的知识小结："></a>2.2.4. 环境变量的知识小结：</h3><ul>
<li>变量名通常要大写</li>
<li>变量可以在自身的Shell及子Shell中使用</li>
<li>常用<code>export</code>来定义环境变量</li>
<li>执行<code>env</code>默认可以显示所有的环境变量名称及对应的值</li>
<li>输出时用<code>$变量名</code>，取消时用<code>unset 变量名</code></li>
<li>书写crond定时任务时要注意，脚本要用到的环境变量最好先在所执行的Shell脚本中重新定义</li>
<li>如果希望环境变量永久生效，则可以将其放在用户环境变量文件或全局环境变量文件里</li>
</ul>
<h2 id="2-3-环境变量初始化与对应文件的生效顺序"><a href="#2-3-环境变量初始化与对应文件的生效顺序" class="headerlink" title="2.3. 环境变量初始化与对应文件的生效顺序"></a>2.3. 环境变量初始化与对应文件的生效顺序</h2><p>在登陆Linux系统并启动一个bash shell时，默认情况下bash会在若干个文件中查找环境变量的设置。这些文件可统称为系统环境文件。bash检查的环境变量文件的情况取决于系统运行Shell的方式。系统运行Shell的方式一般有3种：</p>
<ol>
<li>通过系统用户登陆后默认运行的Shell</li>
<li>非登陆交互式运行Shell</li>
<li>执行脚本运行非交互式Shell</li>
</ol>
<p>当用户登陆Linux系统时，Shell会作为登陆Shell启动。此时的登陆Shell加载环境变量的顺序如下图所示：<br><img src="http://ooww3ll01.bkt.clouddn.com/%E7%99%BB%E9%99%86Shell%E8%AF%BB%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%96%87%E4%BB%B6%E7%9A%84%E6%B5%81%E7%A8%8B.png" alt="登陆Shell读取环境变量文件的流程"></p>
<ul>
<li>用户登陆系统后首先会加载<code>/etc/profile</code>全局环境变量文件，这是Linux系统上默认的Shell主环境变量文件。系统上每个用户登陆都会加载这个文件。</li>
<li>当加载完<code>/etc/profile</code>文件后，才会执行<code>/etc/profile.d/</code>目录下的脚本文件，这个目录下的脚本文件有很多，例如：系统的字符集设置（<code>/etc/sysyconfig/i18n</code>）等，再比如开发跳板机时，我们也把脚本的起始加载放到这个目录下，以便用户登陆后即可运行脚本。</li>
<li>之后开始运行<code>~/.bash_profile</code>（用户环境变量文件），在这个文件中，又会去找<code>~/.bashrc</code>（用户环境变量文件），如果有，则执行，如果没有，则不执行。在<code>~/.bashrc</code>文件中又会去找<code>/etc/bashrc</code>（全局环境变量文件），如果有，则执行，如果没有，则不执行。</li>
<li>如果用户的Shell不是登陆时启动的（比如手动敲下bash时启动或者其它不需要输入密码的登陆及远程SSH连接情况），那么这种非登陆Sheel只会加载<code>~/.bashrc</code>（用户环境变量文件），并会去找<code>/etc/bashrc</code>（全局环境变量文件）。因此如果希望在非登陆Shell下也可读到设置的环境变量等内容，就需要将变量设定等写入<code>~/.bashrc</code>或者<code>/etc/bashrc</code>，而不是<code>~/.bash_profile</code>或<code>/etc/profile</code>。</li>
</ul>
<h1 id="3-普通变量"><a href="#3-普通变量" class="headerlink" title="3. 普通变量"></a>3. 普通变量</h1><h2 id="3-1-定义本地变量"><a href="#3-1-定义本地变量" class="headerlink" title="3.1. 定义本地变量"></a>3.1. 定义本地变量</h2><p>本地变量在用户当前Shell生存期的脚本中使用。</p>
<h3 id="3-1-1-普通变量定义"><a href="#3-1-1-普通变量定义" class="headerlink" title="3.1.1. 普通变量定义"></a>3.1.1. 普通变量定义</h3><p>为普通变量的定义赋值，一般有以下3种写法：</p>
<ul>
<li><code>变量名=值</code>  赋值时不加引号</li>
<li><code>变量名=&#39;值&#39;</code>     赋值时不加单引号</li>
<li><code>变量名=&quot;值&quot;</code>  赋值时加双引号</li>
</ul>
<h3 id="3-1-2-在Shell中定义变量名及为变量内容赋值的要求"><a href="#3-1-2-在Shell中定义变量名及为变量内容赋值的要求" class="headerlink" title="3.1.2. 在Shell中定义变量名及为变量内容赋值的要求"></a>3.1.2. 在Shell中定义变量名及为变量内容赋值的要求</h3><p>变量名一般是由字母、数字、下划线组成的，可以以字母或下划线开头，例如：theshu、theshu123、theshu_wang。</p>
<p>变量的内容可以用单引号或双引号引起来，也可不加引号，但是这三者的含义是不同的，具体参见后文。</p>
<h3 id="3-1-3-普通变量的定义及输出的示例"><a href="#3-1-3-普通变量的定义及输出的示例" class="headerlink" title="3.1.3. 普通变量的定义及输出的示例"></a>3.1.3. 普通变量的定义及输出的示例</h3><p>例子1：采用不同的方式对普通变量进行定义，并一一打印输出：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">a</span>=192.168.1.2</div><div class="line"><span class="attribute">b</span>=<span class="string">'192.168.1.2'</span></div><div class="line"><span class="attribute">c</span>=<span class="string">"192.168.1.2"</span></div><div class="line">echo <span class="string">"a=<span class="variable">$a</span>"</span></div><div class="line">echo <span class="string">"b=<span class="variable">$b</span>"</span></div><div class="line">echo <span class="string">"c=<span class="variable">$&#123;c&#125;</span>"</span></div></pre></td></tr></table></figure></p>
<ul>
<li>提示：<code>$变量名</code>表示输出变量，可以用<code>$c</code>和<code>${c}</code>两种方法。</li>
</ul>
<p>例子1的输出结果如下：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a=<span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span></div><div class="line">b=<span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span></div><div class="line">c=<span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span></div></pre></td></tr></table></figure></p>
<p>可见，将连续的普通字符串的内容赋值给变量，不管用不用引号，或者不管用什么引号，它的内容是什么，打印变量时就会输出什么。</p>
<p>例子2：接着例子1的结果，再在Linux命令行下继续输入如下内容，a、b、c的输出结果又各是什么呢？<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">a=192.168.1.2-<span class="variable">$a</span></div><div class="line">b=<span class="string">'192.168.1.2-$a'</span></div><div class="line">c=<span class="string">"192.168.1.2-<span class="variable">$a</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"a=<span class="variable">$a</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"b=<span class="variable">$b</span>"</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"c=<span class="variable">$&#123;c&#125;</span>"</span></div></pre></td></tr></table></figure></p>
<p>答案如下：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a=<span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span><span class="number">-192.168</span><span class="number">.1</span><span class="number">.2</span></div><div class="line">b=<span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span>-$a</div><div class="line">c=<span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span><span class="number">-192.168</span><span class="number">.1</span><span class="number">.2</span><span class="number">-192.168</span><span class="number">.1</span><span class="number">.2</span></div></pre></td></tr></table></figure></p>
<h3 id="3-1-4-变量定义的基本技巧总结"><a href="#3-1-4-变量定义的基本技巧总结" class="headerlink" title="3.1.4. 变量定义的基本技巧总结"></a>3.1.4. 变量定义的基本技巧总结</h3><p>在这里以上面的例子2来说明：</p>
<p>第一种：<code>a=192.168.1.2-$a</code>。这种定义变量的方式是不加任何引号直接定义变量的内容，当内容为简单连续的数字、字符串、路径名时，可以这样用，例如：a=1，b=theshu等。不加引号时，值里有变量的会被解析后再输出，上述变量定义中因为<code>$a</code>的被解析为<code>192.168.1.2</code>，因此新的a值就是<code>192.168.1.2-192.168.1.2</code></p>
<p>第二种：<code>b=&#39;192.168.1.2-$a&#39;</code>。这种定义变量的方式是通过单引号定义。这种定义方式的特点是：输出变量内容时单引号里是什么就输出什么，即使内容中有变量和命令（命令需要反引起来）也会把它们原样输出。这种方式比较适合于定义显示纯字符串的情况，即不希望解析变量、命令等的场景，因此，对于这里的b的值，定义时看到的是什么就输出什么，即：<code>192.168.1.2-$a</code>。</p>
<p>第三种：<code>c=&quot;192.168.1.2-$a&quot;</code>。这种定义变量的方式是通过双引号定义变量。这种定义方式的特点是：输出变量内容时引号里的变量及命令会经过解析后再输出内容，而不是把双引号中的变量名及命令（命令需要反引起来）原样输出。这种方式比较适合于字符串中附带有变量及命令且想将其解析后再输出的变量定义。</p>
<blockquote>
<p>经验：数字内容的变量定义可以不加引号，其他没有特别要求的字符串等定义最好都加上双引号，如果真的需要原样输出就加单引号，定义变量加双引号是最常见的使用方式。</p>
</blockquote>
<h3 id="3-1-5-把一个命令的结果作为变量的内容赋值的方法"><a href="#3-1-5-把一个命令的结果作为变量的内容赋值的方法" class="headerlink" title="3.1.5. 把一个命令的结果作为变量的内容赋值的方法"></a>3.1.5. 把一个命令的结果作为变量的内容赋值的方法</h3><p>对需要获取命令结果的变量内容赋值的常见方法有两种：<br><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">变量名=`ls`	#&lt;==把命令用反引号引起来，不推荐使用这种方法，因为容易和单引号混淆</div><div class="line">变量名=$(ls)	#&lt;==把命令用$()括起来，推荐使用这种方法</div></pre></td></tr></table></figure></p>
<p>例子1：用两种方法把命令的结果赋值给变量：<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[theshu@theshu ~]$ ls</div><div class="line"><span class="number">1</span>.txt  hello.c  hello.sh  vimrc</div><div class="line">[theshu@theshu ~]$ CMD=<span class="string">`ls`</span></div><div class="line">[theshu@theshu ~]$ echo $CMD</div><div class="line"><span class="number">1</span>.txt hello.c hello.sh vimrc</div><div class="line">[theshu@theshu ~]$ CMD1=$(pwd)</div><div class="line">[theshu@theshu ~]$ echo $CMD1</div><div class="line">/home/theshu</div></pre></td></tr></table></figure></p>
<blockquote>
<p>提示：生产场景中把命令的结果作为变量的内容进行复制的方法在脚本开发时很常见。</p>
</blockquote>
<h3 id="3-1-6-局部（普通）变量定义及赋值的经验小结"><a href="#3-1-6-局部（普通）变量定义及赋值的经验小结" class="headerlink" title="3.1.6. 局部（普通）变量定义及赋值的经验小结"></a>3.1.6. 局部（普通）变量定义及赋值的经验小结</h3><p>常规普通变量定义：</p>
<ul>
<li>若变量内容为连续的数字或字符串，赋值时，变量内容两边可以不加引号，例如<code>a=123</code></li>
<li>变量的内容很多时，如果有空格且希望解析内容中的变量，就加双引号，例如<code>a=&quot;/etc/rc.local $USER&quot;</code>，此时输出变量会对内容中的<code>$USER</code>进行解析然后再输出。</li>
<li>希望原样输出变量中的内容时就用单引号引起内容进行赋值，例如<code>a=&#39;$USER&#39;</code>。</li>
</ul>
<p>希望变量的内容是命令的解析结果的定义及赋值如下：</p>
<ul>
<li>要使用反引号将赋值的命令括起来；或者用$()括起来，例如：<code>a=$(ls)</code></li>
</ul>
<p>变量的输出方法如下：</p>
<ul>
<li>使用<code>$变量名</code>即可输出变量的内容，常用<code>echo $变量名</code>的方式，也可用printf代替echo输出更复杂的格式内容。</li>
</ul>
<p>变量定义的技巧及注意事项：</p>
<ul>
<li>注意命令变量内容前后的字符（即反引号）</li>
<li>在变量名前加<code>$</code>可以取得该变量的值，使用<code>echo</code>或<code>printf</code>命令可以显示变量的值，<code>$A</code>和<code>${A}</code>的写法不同，但效果是一样的。</li>
<li>用<code>echo</code>等命令输出变量的时候，也可以用单引号、双引号、反引号，例如：<code>echo $A</code>、<code>echo &quot;$A&quot;</code>、<code>echo &#39;$A&#39;</code>，它们的用法和前面变量内容定义的总结是一致的。</li>
<li><code>$dbname_tname</code>，当变量后面连接有其它字符的时候，必须给变量加上大括号<code>{}</code>，例如：<code>$dbname_tname</code>就要改成<code>${dbname}_tname</code>。</li>
</ul>
<h2 id="3-2-变量定义及变量输出说明"><a href="#3-2-变量定义及变量输出说明" class="headerlink" title="3.2. 变量定义及变量输出说明"></a>3.2. 变量定义及变量输出说明</h2><p>有关Shell变量定义、赋值及变量输出加单引号、双引号、反引号与不加引号的简要说明如下表：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>单引号</td>
<td>所见即所得，即输出时会将单引号内的所有内容都原样输出，或者描述为单引号里面看到的是什么就会输出什么，这称为强引用</td>
</tr>
<tr>
<td>双引号（默认）</td>
<td>输出双引号内的所有内容；如果内容中有命令（要反引下）、变量、特殊转义符等，会先把变量、命令、转义字符解析出结果，然后再输出最终内容，推荐使用，这称为弱引用</td>
</tr>
<tr>
<td>无引号</td>
<td>赋值时，如果变量内容中有空格，则会造成赋值不完整。而在输出内容时，会将含有空格的字符串视为一个整体来输出；如果内容中有命令（要反引下）、变量等，则会先把变量、命令解析出结果，然后输出最终内容；如果字符串中带有空格等特殊字符，则有可能无法完整地输出，因此需要改加双引号。一般连续的字符串、数字、路径等可以不加任何引号进行赋值和输出，不过最好是用双引号替代无引号的情况，特别是对变量赋值时</td>
</tr>
<tr>
<td>反引号</td>
<td>反引号一般用于引用命令，执行的时候命令会被执行，相当于<code>$()</code>，赋值和输出都要用反引号将命令引起来</td>
</tr>
</tbody>
</table>
<blockquote>
<p>提示：这里仅为Linux Shell下的结论，对于awk语言会有点特别。下文示例中会有说明。</p>
</blockquote>
<p>高手前辈的建议是：</p>
<ul>
<li>在脚本中定义普通字符串变量时，应尽量把变量的内容用双引号括起来</li>
<li>单纯数字的变量内容可以不加引号</li>
<li>希望变量内容原样输出时需要加单引号</li>
<li>希望变量值引用命令并获取命令的结果时就用反引号或<code>$()</code></li>
</ul>
<h2 id="3-3-单引号、双引号与不加引号的实战演示"><a href="#3-3-单引号、双引号与不加引号的实战演示" class="headerlink" title="3.3. 单引号、双引号与不加引号的实战演示"></a>3.3. 单引号、双引号与不加引号的实战演示</h2><ul>
<li><p>例子1：对<code>由反引号引起来的date</code>命令或<code>$(date)</code>进行测试。</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[theshu@theshu ~]$ echo <span class="string">'today is date'</span></div><div class="line">today <span class="keyword">is</span> date</div><div class="line">[theshu@theshu ~]$ echo <span class="string">'tody is `date`'</span></div><div class="line">tody <span class="keyword">is</span> `<span class="javascript">date</span>`</div><div class="line">[theshu@theshu ~]$ echo <span class="string">"today is date"</span></div><div class="line">today <span class="keyword">is</span> date</div><div class="line">[theshu@theshu ~]$ echo <span class="string">"today is `date`"</span></div><div class="line">today <span class="keyword">is</span> Sun Feb <span class="number">25</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">42</span> CST <span class="number">2018</span></div><div class="line">[theshu@theshu ~]$ echo <span class="string">"today is $(date)"</span> <span class="comment">#&lt;==对于连续的字符串等内容输出</span></div><div class="line">			一般可以不加引号，但加双引号比较保险，所以推荐使用</div><div class="line">today <span class="keyword">is</span> Sun Feb <span class="number">25</span> <span class="number">12</span>:<span class="number">13</span>:<span class="number">59</span> CST <span class="number">2018</span></div><div class="line">[theshu@theshu ~]$ echo today <span class="keyword">is</span> $(date) <span class="comment">#&lt;==带空格的内容不加引号，同样可</span></div><div class="line">			以正确地输出，但不建议这么做</div><div class="line">today <span class="keyword">is</span> Sun Feb <span class="number">25</span> <span class="number">12</span>:<span class="number">14</span>:<span class="number">09</span> CST <span class="number">2018</span></div></pre></td></tr></table></figure>
</li>
<li><p>例子2：变量定义后，在调用变量输出打印时加引号测试。</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>OLDBOY=testchars</div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>echo <span class="variable">$OLDBOY</span></div><div class="line">testchars</div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>echo <span class="string">'$OLDBOY'</span></div><div class="line"><span class="variable">$OLDBOY</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>echo <span class="string">"$OLDBOY"</span></div><div class="line">testchars</div></pre></td></tr></table></figure>
</li>
<li><p>例子3：使用三剑客中的<code>grep</code>过滤字符串时给过滤的内容加引号。</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[theshu@theshu ~]$ cat <span class="keyword">grep</span>.log  <span class="comment">#&lt;==待测试的内容，THESHU变量值为theshu</span></div><div class="line">testchars</div><div class="line">theshu</div><div class="line">[theshu@theshu ~]$ <span class="keyword">grep</span> <span class="string">"$THESHU"</span> <span class="keyword">grep</span>.log</div><div class="line">theshu</div><div class="line">[theshu@theshu ~]$ <span class="keyword">grep</span> <span class="string">'$THESHU'</span> <span class="keyword">grep</span>.log</div><div class="line">[theshu@theshu ~]$ <span class="keyword">grep</span> $THESHU <span class="keyword">grep</span>.log	<span class="comment">#&lt;==同双引号的情况，</span></div><div class="line">		但不建议这样使用，没有特殊需求时应一律加双引号</div><div class="line">theshu</div></pre></td></tr></table></figure>
</li>
<li><p>例子4：使用<code>awk</code>调用Shell中的变量，分别针对加引号、不加引号等情况进行测试。</p>
</li>
</ul>
<p>首先在给Shell中的变量赋值时不加任何引号，这里使用<code>awk</code>输出测试结果：<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>ETT=<span class="number">123</span>	<span class="comment">#&lt;==定义变量ETT并赋值123，没加引号</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print "$ETT"&#125;'</span></div><div class="line"><span class="variable">$ETT</span></div><div class="line"><span class="comment">#&lt;==加双引号引用$ETT，却只输出了本身，这个就不符合前文的结论了</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print $ETT&#125;'</span></div><div class="line"></div><div class="line"><span class="comment">#&lt;==不加引号的￥ETT，又输出了空的结果，这个也不符合前文的结论</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print '</span><span class="variable">$ETT</span><span class="string">'&#125;'</span></div><div class="line"><span class="number">123</span></div><div class="line"><span class="comment">#&lt;==加单引号引用$ETT，成功输出解析后的结果，这个也不符合前文的结论</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print "'</span><span class="variable">$ETT</span><span class="string">'"&#125;'</span></div><div class="line"><span class="number">123</span></div></pre></td></tr></table></figure></p>
<p>以上结果正好与前面的结论相反，这是<code>awk</code>调用Shell变量的特殊用法。</p>
<p>然后在给Shell中的变量赋值时加单引号，同样使用<code>awk</code>输出测试结果：<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>ETT=<span class="string">'theshu'</span>	<span class="comment">#&lt;==定义变量ETT并赋值theshu，加单引号</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print "$ETT"&#125;'</span></div><div class="line"><span class="variable">$ETT</span></div><div class="line"><span class="comment">#&lt;==加双引号引用$ETT，输出本身</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print $ETT&#125;'</span></div><div class="line"></div><div class="line"><span class="comment">#&lt;==对$ETT不加引号，输出空的结果</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print '</span><span class="variable">$ETT</span><span class="string">'&#125;'</span></div><div class="line"></div><div class="line"><span class="comment">#&lt;==加单引号引用$ETT，也是输出空的结果，这个和前文的不加引号定义、赋值的结果又不一样</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print "'</span><span class="variable">$ETT</span><span class="string">'"&#125;'</span></div><div class="line">theshu</div><div class="line"><span class="comment">#&lt;==在单引号外再加一层双引号引用$ETT，则输出解析后的结果</span></div></pre></td></tr></table></figure></p>
<p>接着在给Shell中的变量赋值时加双引号，也使用<code>awk</code>输出测试结果：<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>ETT=<span class="string">"theshu"</span> <span class="comment">#&lt;==定义变量ETT并赋值theshu，加双引号</span></div><div class="line">		这个测试结果同单引号的情况。</div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print "$ETT"&#125;'</span></div><div class="line"><span class="variable">$ETT</span></div><div class="line"><span class="comment">#&lt;==加双引号引用$ETT，会输出本身</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print $ETT&#125;'</span></div><div class="line"></div><div class="line"><span class="comment">#&lt;==不加引号的$ETT，会输出空的结果</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print '</span><span class="variable">$ETT</span><span class="string">'&#125;'</span></div><div class="line"></div><div class="line"><span class="comment">#&lt;==加单引号的$ETT，会输出空的结果</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>awk <span class="string">'BEGIN &#123;print "'</span><span class="variable">$ETT</span><span class="string">'"&#125;'</span></div><div class="line">theshu</div><div class="line"><span class="comment">#&lt;==在单引号外部再加双引号引用$ETT，会输出正确结果</span></div></pre></td></tr></table></figure></p>
<p>最后在给Shell中的变量赋值时加反引号引用命令，同样使用<code>awk</code>输出测试结果：<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[theshu@theshu ~]$ ETT=<span class="string">`pwd`</span>	<span class="comment">#&lt;==定义变量ETT并赋值pwd命令，加反引号，这个测试结果更特殊</span></div><div class="line">[theshu@theshu ~]$ echo $ETT</div><div class="line">/home/theshu</div><div class="line">[theshu@theshu ~]$ awk <span class="string">'BEGIN &#123;print "$ETT"&#125;'</span></div><div class="line">$ETT</div><div class="line"><span class="comment">#&lt;==加双引号引用$ETT，会输出本身</span></div><div class="line">[theshu@theshu ~]$ awk <span class="string">'BEGIN &#123;print $ETT&#125;'</span></div><div class="line"></div><div class="line"><span class="comment">#&lt;==不加引号引用$ETT，会输出空格结果</span></div><div class="line">[theshu@theshu ~]$ awk <span class="string">'BEGIN &#123;print '</span>$ETT<span class="string">'&#125;'</span></div><div class="line"><span class="number">0</span></div><div class="line"><span class="comment">#&lt;==单引号引用$ETT，会输出错误的结果</span></div><div class="line">[theshu@theshu ~]$ awk <span class="string">'BEGIN &#123;print "'</span>$ETT<span class="string">'"&#125;'</span></div><div class="line">/home/theshu</div><div class="line"><span class="comment">#&lt;==在单引号外部再加双引号引用$ETT，会输出正确的结果</span></div></pre></td></tr></table></figure></p>
<p>结论：不管变量如何定义、赋值，除了加单引号以外，利用<code>awk</code>直接获取变量的输出，结果都是一样的，因此，在<code>awk</code>取用Shell变量时，我们更多的还是喜欢先用<code>echo $变量</code>输出变量，然后通过管道给<code>awk</code>，进而控制变量的输出结果。举例如下：<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>ETT=<span class="string">"theshu"</span> <span class="comment">#&lt;==最常规的赋值语法</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>echo <span class="string">"$ETT"</span> | awk <span class="string">'&#123;print $0&#125;'</span></div><div class="line">theshu</div><div class="line"><span class="comment">#&lt;==用双引号引用$ETT</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>echo <span class="string">'$ETT'</span> | awk <span class="string">'&#123;print $0&#125;'</span></div><div class="line"><span class="variable">$ETT</span></div><div class="line"><span class="comment">#&lt;==用单引号引用$ETT</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>echo <span class="variable">$ETT</span> | awk <span class="string">'&#123;print $0&#125;'</span></div><div class="line">theshu</div><div class="line"><span class="comment">#&lt;==不加引号引用$ETT</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>ETT=`pwd`	<span class="comment">#&lt;==命令赋值的语法</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>echo <span class="string">"$ETT"</span> | awk <span class="string">'&#123;print $0&#125;'</span></div><div class="line">/home/theshu</div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>echo <span class="string">'$ETT'</span> | awk <span class="string">'&#123;print $0&#125;'</span></div><div class="line"><span class="variable">$ETT</span></div><div class="line">[theshu<span class="variable">@theshu</span> ~]<span class="variable">$ </span>echo <span class="variable">$ETT</span> | awk <span class="string">'&#123;print $0&#125;'</span></div><div class="line">/home/theshu</div></pre></td></tr></table></figure></p>
<p>这就符合前面给出的普通情况的结论了。下面再来用<code>sed</code>测试一下指定变量关键字的过滤：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[theshu@theshu ~]$ cat sed.log</div><div class="line">testchars</div><div class="line">theshu</div><div class="line">[theshu@theshu ~]$ sed -n /<span class="string">"$THESHU"</span>/<span class="selector-tag">p</span> sed<span class="selector-class">.log</span> #&lt;==加双引号测试</div><div class="line">theshu</div><div class="line">[theshu@theshu ~]$ sed -n /<span class="variable">$THESHU</span>/<span class="selector-tag">p</span> sed<span class="selector-class">.log</span> #&lt;==不加引号测试</div><div class="line">theshu</div><div class="line">[theshu@theshu ~]$ sed -n /<span class="string">'$THESHU'</span>/<span class="selector-tag">p</span> sed<span class="selector-class">.log</span> #&lt;==加单引号测试</div><div class="line"></div><div class="line">#&lt;==注意，这里是输出本身，但是文件里没有与本身匹配的字符串，因此输出为空</div></pre></td></tr></table></figure></p>
<p>所以得到结论，<code>sed</code>和<code>grep</code>的测试和前面的结论是相符的，唯有<code>awk</code>有些特殊。</p>
<h2 id="3-4-关于定义普通字符串变量的建议"><a href="#3-4-关于定义普通字符串变量的建议" class="headerlink" title="3.4. 关于定义普通字符串变量的建议"></a>3.4. 关于定义普通字符串变量的建议</h2><ol>
<li>内容是纯数字、简单的连续字符（内容中不带有任何空格）时，定义时可以不加任何引号，例如：<code>theshuAge=24</code></li>
<li>没有特殊情况时，字符串一律用双引号定义赋值，特别是多个字符串中间有空格时，例如：<code>myName=&quot;Theshu is a handsome boy.&quot;</code></li>
<li>当变量里的内容需要原样输出时，要用单引号，这样的需求极少，例如：<code>THESHU_NAME=&#39;theshu&#39;</code></li>
</ol>
<h1 id="4-变量定义技巧总结"><a href="#4-变量定义技巧总结" class="headerlink" title="4. 变量定义技巧总结"></a>4. 变量定义技巧总结</h1><p>可以多学习和模仿操作系统自带的<code>/etc/init.d/functions</code>函数库脚本的定义思路，多学习Linux系统脚本中的定义，有经验的话最终应形成一套适合自己的规范和习惯。</p>
<ol>
<li>变量名及变量内容定义小结<ul>
<li>变量名只能为字母、数字或下划线，只能以字母或下划线开头。</li>
<li>变量名的定义要有一定的规范，并且要见名知意。建议用驼峰命名法。</li>
<li>一般的变量定义、赋值常用双引号；简单连续的字符串可以不加引号；希望原样输出时使用单引号。</li>
<li>希望变量的内容是命令的解析结果时，要用<code>反引号</code>，或者用<code>$()</code>把命令括起来再赋值。</li>
</ul>
</li>
<li>Shell定义变量时使用<code>=</code>的知识<ul>
<li><code>a=1</code>里等号是赋值的意思；比较变量是否相等时也可以用<code>=</code>或<code>==</code>。</li>
</ul>
</li>
<li>打印输出及使用变量的知识<ul>
<li>打印输出或使用变量时，变量名前要接<code>$</code>符号；变量名后面紧接其它字符的时候，要用大括号将变量部分单独括起来，以防止出现<code>金庸新著</code>的问题；在<code>unset</code>、<code>export</code>、<code>(())</code>等场景中使用但不打印变量时不加<code>$</code>，这个有些例外。</li>
<li>打印输出或使用变量时，一般加双引号或不加引号；如果是字符串变量，最好加双引号；希望原样输出时使用单引号。</li>
</ul>
</li>
</ol>
<hr>
<blockquote>
<p>OK</p>
</blockquote>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Shell/" rel="tag"><i class="fa fa-tag"></i> Shell</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/02/19/Shell/004. Shell学习笔记02-Shell脚本初步入门/" rel="next" title="Shell学习笔记02-Shell脚本初步入门">
                <i class="fa fa-chevron-left"></i> Shell学习笔记02-Shell脚本初步入门
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/02/19/Shell/006. Shell学习笔记04-Shell变量知识进阶/" rel="prev" title="Shell学习笔记04-Shell变量知识进阶">
                Shell学习笔记04-Shell变量知识进阶 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/head_me.jpg"
                alt="奇怪先生theshu" />
            
              <p class="site-author-name" itemprop="name">奇怪先生theshu</p>
              <p class="site-description motion-element" itemprop="description">奇怪先生的博客</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">78</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="http://weibo.com/thewanghongshu" target="_blank" title="Weibo"><i class="fa fa-fw fa-globe"></i>Weibo</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-什么是Shell变量"><span class="nav-text">1. 什么是Shell变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-什么是变量"><span class="nav-text">1.1. 什么是变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Shell变量的特性"><span class="nav-text">1.2. Shell变量的特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-变量类型"><span class="nav-text">1.3. 变量类型</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-环境变量"><span class="nav-text">2. 环境变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-自定义环境变量"><span class="nav-text">2.1. 自定义环境变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-设置环境变量"><span class="nav-text">2.1.1. 设置环境变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2-设置登陆提示的两种方式"><span class="nav-text">2.1.2. 设置登陆提示的两种方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-显示与取消环境变量"><span class="nav-text">2.2. 显示与取消环境变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1-通过echo或printf命令打印环境变量"><span class="nav-text">2.2.1. 通过echo或printf命令打印环境变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-用env或set显示默认的环境变量"><span class="nav-text">2.2.2. 用env或set显示默认的环境变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-用unset消除本地变量和环境变量"><span class="nav-text">2.2.3. 用unset消除本地变量和环境变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-4-环境变量的知识小结："><span class="nav-text">2.2.4. 环境变量的知识小结：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-环境变量初始化与对应文件的生效顺序"><span class="nav-text">2.3. 环境变量初始化与对应文件的生效顺序</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-普通变量"><span class="nav-text">3. 普通变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-定义本地变量"><span class="nav-text">3.1. 定义本地变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1-普通变量定义"><span class="nav-text">3.1.1. 普通变量定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-2-在Shell中定义变量名及为变量内容赋值的要求"><span class="nav-text">3.1.2. 在Shell中定义变量名及为变量内容赋值的要求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-3-普通变量的定义及输出的示例"><span class="nav-text">3.1.3. 普通变量的定义及输出的示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-4-变量定义的基本技巧总结"><span class="nav-text">3.1.4. 变量定义的基本技巧总结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-5-把一个命令的结果作为变量的内容赋值的方法"><span class="nav-text">3.1.5. 把一个命令的结果作为变量的内容赋值的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-6-局部（普通）变量定义及赋值的经验小结"><span class="nav-text">3.1.6. 局部（普通）变量定义及赋值的经验小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-变量定义及变量输出说明"><span class="nav-text">3.2. 变量定义及变量输出说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-单引号、双引号与不加引号的实战演示"><span class="nav-text">3.3. 单引号、双引号与不加引号的实战演示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-关于定义普通字符串变量的建议"><span class="nav-text">3.4. 关于定义普通字符串变量的建议</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-变量定义技巧总结"><span class="nav-text">4. 变量定义技巧总结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">奇怪先生theshu</span>

  

  
</div>











        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
















  
  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three-waves.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.4"></script>



  



	





  





  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  

  

  

  


  <script type="text/javascript" src="/lib/clipboard/clipboard.js"></script>
<script type="text/javascript" src="/js/src/custom.js"></script>


</body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
