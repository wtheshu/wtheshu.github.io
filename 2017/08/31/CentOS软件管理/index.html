<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="奇怪先生的博客"><title>CentOS软件管理 | 奇怪先生的博客</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">CentOS软件管理</h1><a id="logo" href="/.">奇怪先生的博客</a><p class="description">耳目得来终觉浅，觉知此事要躬行。</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">CentOS软件管理</h1><div class="post-meta"><a href="/2017/08/31/CentOS软件管理/#comments" class="comment-count"></a><p><span class="date">Aug 31, 2017</span><span><a href="/categories/Linux/" class="category">Linux</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><blockquote>
<p>学习CentOS的软件管理方式，包括RPM包的安装更新查询卸载等，还有源码包的安装方式。</p>
</blockquote>
<h1 id="RPM-工具"><a href="#RPM-工具" class="headerlink" title="RPM 工具"></a>RPM 工具</h1><h2 id="rpm-介绍"><a href="#rpm-介绍" class="headerlink" title="rpm 介绍"></a>rpm 介绍</h2><p>RPM是Red Hat Package Manager的缩写，由RedHat公司开发。它是以一种数据库记录的方式将我们所需要的套件安装到Linux主机的一套管理程序。也就是说，在Linux系统中存在着一个关于RPM的数据库，它记录了安装的包以及包与包之间的依赖关系。RPM包是预先在Linux机器上编译并打包的文件，安装非常快捷。但是它也有一些缺点，比如安装环境必须与编译时一致或相当，包与包之间存在着相互依赖的情况，卸载包时需要先把依赖的包卸载。如果依赖的包是系统所必须的，就不能卸载这个包，否则系统会崩溃。</p>
<p>RPM包的文件名都由-和.分成了若干部分，一般都像这样 <code>abattis-cantarell-fonts-0.0.16-3.el7.noarch.rpm</code> 、<code>abrt-2.1.11-45.el7.centos.x86_64.rpm</code>。abrt为包名，2.11为版本信息，45.el7.centos为发布版本号，x86_64为运行平台。常见的运行平台有i386、i486、i586、i686（这三个为32位的CPU）和x86_64（64位的CPU）。另外，有些RPM包并没有写具体的平台而是noarch，这是该包没有平台限制的意思。</p>
<h2 id="RPM-常用的命令"><a href="#RPM-常用的命令" class="headerlink" title="RPM 常用的命令"></a>RPM 常用的命令</h2><table>
<thead>
<tr>
<th>常用选项</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-i</td>
<td>表示安装</td>
</tr>
<tr>
<td>-v</td>
<td>表示可视化</td>
</tr>
<tr>
<td>-h</td>
<td>表示显示安装进度</td>
</tr>
<tr>
<td>-U</td>
<td>表示升级</td>
</tr>
<tr>
<td>-e</td>
<td>表示卸载</td>
</tr>
<tr>
<td>-q</td>
<td>表示查询</td>
</tr>
<tr>
<td>–force</td>
<td>表示强制安装，即使覆盖属于其他包的文件也要安装</td>
</tr>
<tr>
<td>–nodeps</td>
<td>表示当要安装（或卸载）的RPM包依赖于其它包时，即使其它包没有安装（或卸载），也要安装（或卸载）这个包</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>rpm -ivh 完整包名</td>
<td>安装RPM包</td>
</tr>
<tr>
<td>rpm -Uvh 完整包名</td>
<td>升级RPM包</td>
</tr>
<tr>
<td>rpm -ev 包名</td>
<td>卸载RPM包（这里的filename是通过RPM的查询功能所查询到的）</td>
</tr>
<tr>
<td>rpm -q 包名</td>
<td>查询一个RPM包</td>
</tr>
<tr>
<td>rpm -qa (包名)</td>
<td>查询当前系统所有已安装的RPM包</td>
</tr>
<tr>
<td>rpm -qi 包名</td>
<td>得到一个已安装的RPM包的相关信息</td>
</tr>
<tr>
<td>rpm -ql 包名</td>
<td>列出一个RPM包的安装文件</td>
</tr>
<tr>
<td>rpm -qf 文件的绝对路径</td>
<td>列出某个文件属于哪个RPM包</td>
</tr>
</tbody>
</table>
<h1 id="YUM-工具"><a href="#YUM-工具" class="headerlink" title="YUM 工具"></a>YUM 工具</h1><h2 id="YUM-介绍"><a href="#YUM-介绍" class="headerlink" title="YUM 介绍"></a>YUM 介绍</h2><p>YUM工具是用来集中管理RPM包的，使用它会更加方便的进行安装卸载升级RPM包。YUM工具最大的优势在于可以联网去下载所需要的RPM包，然后自动安装，若是所安装的RPM包有依赖关系，它会依次安装所依赖的包。</p>
<h2 id="YUM-常用的命令"><a href="#YUM-常用的命令" class="headerlink" title="YUM 常用的命令"></a>YUM 常用的命令</h2><table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>yum list</td>
<td>列出所有可用的RPM包资源。（已安装可未安装的都显示出来，yum list会先列出已经安装的包(Installed Packages) 然后再列出可以安装的包(Available Packages)）</td>
</tr>
<tr>
<td>yum search [关键字]</td>
<td>搜索RPM包（还可以利用 grep 来过滤）</td>
</tr>
<tr>
<td>yum install [-y] RPM包名</td>
<td>安装RPM包。加上-y选项，表示自动安装，跳过交互的程序</td>
</tr>
<tr>
<td>yum remove [-y] RPM包名</td>
<td>卸载RPM包（注意，卸载时最好不要加-y选项，以免重要的RPM包被卸载掉）</td>
</tr>
<tr>
<td>yum update [-y] RPM包名</td>
<td>升级RPM包</td>
</tr>
<tr>
<td>yum -y update</td>
<td>升级所有包，改变软件设置和系统设置,系统版本内核都升级</td>
</tr>
<tr>
<td>yum -y upgrade</td>
<td>升级所有包，不改变软件设置和系统设置，系统版本升级，内核不改变</td>
</tr>
<tr>
<td>yum provides 命令名</td>
<td>查询该命令是由那个包安装的</td>
</tr>
<tr>
<td>yum grouplist</td>
<td>列出所有安装过和未安装过的套件</td>
</tr>
<tr>
<td>yum groupinstall 套件名</td>
<td>安装该组件套件</td>
</tr>
<tr>
<td>yum groupremove 套件名</td>
<td>卸载该组件套件</td>
</tr>
</tbody>
</table>
<h2 id="安装YUM扩展源"><a href="#安装YUM扩展源" class="headerlink" title="安装YUM扩展源"></a>安装YUM扩展源</h2><ol>
<li>我们使用 yum 安装 rpm 包时，经常遇到一些包没有，这时候你可以尝试安装 epel 的扩展源，这里有很多系统不自带的 rpm 包。</li>
</ol>
<ul>
<li><code>yum install -y epel-release</code></li>
<li><code>yum list</code></li>
<li>你会发现最右侧出现很多 epel 的 rpm 包。</li>
</ul>
<ol>
<li>下载一个扩展源的rpm包，用yum安装。然后用 <code>yum clean all</code> 或 <code>yum makecache</code> 清除缓存，用 <code>yum list</code> 检查是否成功。</li>
</ol>
<h2 id="使用本地光盘制作YUN源"><a href="#使用本地光盘制作YUN源" class="headerlink" title="使用本地光盘制作YUN源"></a>使用本地光盘制作YUN源</h2><p>有时候，Linux系统不能联网，此时当然就不能很便捷地使用联网的yum源了，这时就需要我们自己在Linux系统下使用光盘制作yum源。具体操作步骤如下：</p>
<ol>
<li>挂载光盘<br><code>mount /dev/cdrom /mnt</code></li>
<li>删除/etc/yum.repos.d目录下所有的repo文件（删除之前，最好先做一下备份）。<br><code>cp -r /etc/yum.repos.d /etc/yum.repos.d_bak</code><br><code>rm -rf /etc/yum.repos.d/*</code></li>
<li><p>创建新文件dvd.repo，并添加如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># vim /etc/yum.repos.d/dvd.repo</div><div class="line">[dvd]</div><div class="line">name=install dvd</div><div class="line">baseurl=file:///mnt</div><div class="line">enabled=1</div><div class="line">gpgcheck=0</div></pre></td></tr></table></figure>
</li>
<li><p>刷新repos生成缓存，如下所示：<br><code>yum makecache</code></p>
</li>
<li>然后就可以用yum了。若需要恢复之前的yum源，则进行如下操作：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># rm -rf /etc/yum.repos.d</div><div class="line"># mv /etc/yum.repos.d_bak /etc/yum.repos.d</div><div class="line"># yum list  //这一步是必须要执行的，这样就可以生成缓存，方便下次使用</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="利用YUM工具下载RPM包"><a href="#利用YUM工具下载RPM包" class="headerlink" title="利用YUM工具下载RPM包"></a>利用YUM工具下载RPM包</h2><p>有时我们需要下载RPM包但不安装，而仅仅是复制给其它机器使用。我们可以用YUM工具来完成这个任务，做到只下载而不安装。命令如下：</p>
<ol>
<li>安装 yum-downloadonly（首先需要安装一个插件来支持只下载不安装）<br><code>yum install -y yum-plugin-downloadonly.noarch</code>（如果你的 CentOS 是 5.x 版本，则需要安装 yum-downloadonly.noarch 这个包。）</li>
<li>只下载而不安装RPM包 <code>yum install 包名 -y --downloadonly</code> （这样虽然下载了，但是并没有保存到我们想要的目录下，它默认保存到了/var/cache/yum/后面还有好几层子目录，根据你系统的版本决定。）  </li>
<li>把RPM包下载到指定目录 <code>yum install 包名 -y --downloadonly --downloaddir=绝对路径</code></li>
<li>下载一个已安装过的RPM包 <code>yum reinstall 包名 -y --downloaonly [--downloddir=绝对路径]</code></li>
</ol>
<h1 id="源码包安装"><a href="#源码包安装" class="headerlink" title="源码包安装"></a>源码包安装</h1><p>在Linux下安装源码包是最常用的。安装源码包，需要我们把源代码编译成可执行的二进制文件。如果你能读懂这些源代码，就可以修改这些源代码的自定义功能，然后按你的需求编译。使用源码包除了可以自定义修改源代码外，还可以定制相关的功能，因为源码包在编译时可以附加额外的选项。</p>
<p>源码包的编译用到了Linux系统里的编译器。常见的源码包一般都是用C语言开发的，因为C语言是Linux上最标准的程序语言。Linux上的C语言编译器称为gcc。利用它可以把C语言编译成可执行的二进制文件。所有，如果Linux上没有安装gcc，就无法编译源码。可以使用命令<code>yum install -y gcc</code>来完成安装。</p>
<h2 id="源码包安装的一般步骤"><a href="#源码包安装的一般步骤" class="headerlink" title="源码包安装的一般步骤"></a>源码包安装的一般步骤</h2><p>安装源码包通常需要以下三个步骤：</p>
<ol>
<li><code>./configure</code>。这一步可以定制功能，加上相应的选项即可，具体有什么选项可以通过命令<code>./configure --help</code>来查看。（一般常用的有–prefix=PREFIX这个选项的意思是定义软件包安装到哪里）这一步会自动检测你的Linux系统与相关的套件是否有编译该源代码包时所需要的库，因为一旦缺少某个库，就不能完成编译，所以若是遇到这种情况，要先安装这些库。只有检测通过后，才会生成Makefile文件。</li>
<li><code>make</code>。使用这个命令，会根据Makefile文件中预设的参数进行编译，这一步其实就是gcc在工作了。</li>
<li><code>make install</code>。这一步是安装步骤，用于创建相关软件的存放目录和配置文件。</li>
</ol>
<p>注意，对于以上这3个步骤，并不是所有的源代码包软件都一样，也就是说，源码包的安装并没有标准的安装步骤。这就需要你在拿到源码包解压后，进入目录，找到相关的帮助文档（通常，会以INSTALL或README为文件名）。</p>
<p>通常，源码包都会放置在/usr/local/src目录下，方便对源码包的统一管理。</p>
<h2 id="一个源码包安装的实例（安装Apache）"><a href="#一个源码包安装的实例（安装Apache）" class="headerlink" title="一个源码包安装的实例（安装Apache）"></a>一个源码包安装的实例（安装Apache）</h2><ol>
<li>下载源码包</li>
</ol>
<ul>
<li><code>cd /usr/local/src/</code>   #约定目录</li>
<li><code>wget http://mirrors.cnnic.cn/apache/httpd/httpd-2.2.27.tar.bz2</code></li>
</ul>
<ol>
<li>解压</li>
</ol>
<ul>
<li><code>tar jxvf httpd-2.2.27.tar.bz2</code>    //查看README或者INSTALL说明文件</li>
</ul>
<ol>
<li>指定编译参数</li>
</ol>
<ul>
<li><code>./configure  --help</code></li>
<li><code>./configure  --prefix 安装路径 ……</code>     </li>
</ul>
<ol>
<li><code>echo $?</code>     验证是否成功</li>
<li><code>make</code></li>
<li><code>echo $?</code>     验证是否成功</li>
<li><code>make install</code></li>
</ol>
<blockquote>
<p>结束</p>
</blockquote>
</div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/09/03/Shell基础知识/" class="pre">Shell基础知识</a><a href="/2017/08/31/Linux压缩打包工具的使用/" class="next">Linux压缩打包工具的使用</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#RPM-工具"><span class="toc-text">RPM 工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#rpm-介绍"><span class="toc-text">rpm 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RPM-常用的命令"><span class="toc-text">RPM 常用的命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#YUM-工具"><span class="toc-text">YUM 工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#YUM-介绍"><span class="toc-text">YUM 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#YUM-常用的命令"><span class="toc-text">YUM 常用的命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装YUM扩展源"><span class="toc-text">安装YUM扩展源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用本地光盘制作YUN源"><span class="toc-text">使用本地光盘制作YUN源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#利用YUM工具下载RPM包"><span class="toc-text">利用YUM工具下载RPM包</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#源码包安装"><span class="toc-text">源码包安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#源码包安装的一般步骤"><span class="toc-text">源码包安装的一般步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一个源码包安装的实例（安装Apache）"><span class="toc-text">一个源码包安装的实例（安装Apache）</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/12/19/常用便携软件/">常用便携软件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/01/Linux系统管理技巧（Aming）/">Linux系统管理技巧（Aming）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/FTP服务配置（Aming）/">FTP服务配置（Aming）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/shell脚本中的select循环/">shell脚本中的select循环</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/shell脚本基础语法/">shell脚本基础语法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/20/NFS服务简单配置（Aming）/">NFS服务简单配置（Aming）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/18/已读书清单-武侠/">已读书清单-武侠</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/18/已读书清单-科幻/">已读书清单-科幻</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/18/已读书清单-综合/">已读书清单-综合</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/06/Linux基础部分的补充/">Linux基础部分的补充</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reading/">Reading</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tool/">Tool</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vim/">Vim</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Server/">服务</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/RegularExpression/">正则表达式</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zhuanzai/">转载</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">奇怪先生theshu.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>