<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="奇怪先生的博客"><title>Shell脚本基础语法 | 奇怪先生的博客</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Shell脚本基础语法</h1><a id="logo" href="/.">奇怪先生的博客</a><p class="description">耳目得来终觉浅，觉知此事要躬行。</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Shell脚本基础语法</h1><div class="post-meta"><a href="/2017/09/21/Shell/002. Shell脚本基础语法/#comments" class="comment-count"></a><p><span class="date">Sep 21, 2017</span><span><a href="/categories/Shell/" class="category">Shell</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><blockquote>
<p>GO</p>
</blockquote>
<h1 id="什么是shell脚本"><a href="#什么是shell脚本" class="headerlink" title="什么是shell脚本"></a>什么是shell脚本</h1><p>shell脚本在Linux系统管理员的运维工作中非常重要。shell脚本并不能称之为正式的编程语言，因为它是在Linux的shell中运行的，而且它是有一些逻辑语法组合起来的命令的集合，所以称之为shell脚本很贴切。</p>
<p>在运维工作中，自定义的shell脚本建议都放到<code>/usr/local/bin</code>目录下，这样做的好处是，一来可以很方便的管理文档，二来在以后运维工作中，接管你的管理员就会知道自定义脚本都放在了哪里，方便维护。</p>
<h2 id="shell脚本的创建和运行"><a href="#shell脚本的创建和运行" class="headerlink" title="shell脚本的创建和运行"></a>shell脚本的创建和运行</h2><h3 id="创建一个shell脚本"><a href="#创建一个shell脚本" class="headerlink" title="创建一个shell脚本"></a>创建一个shell脚本</h3><p><code>vim hello.sh</code>用编辑器vim即可创建一个空的shell脚本。在其中添加脚本内容：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment"># HelloWorld!</span></div><div class="line"><span class="comment"># 创建时间：2017-09-21</span></div><div class="line"></div><div class="line">date</div><div class="line"><span class="built_in">echo</span> <span class="string">"HelloWorld!"</span></div></pre></td></tr></table></figure></p>
<p>说明：</p>
<ul>
<li>shell脚本通常都是以.sh为后缀名。</li>
<li>shell脚本第一行要以<code>#!/bin/bash</code>或<code>#!/bin/sh</code>开头，它俩是相同的，是链接文件。这行内容表示的是该文件使用的是bash语法。</li>
<li><code>#</code>为注释符，一般在后面填写这样的注释内容：本脚本的功能，创建时间和更新时间，以及作者等相关信息。</li>
</ul>
<h3 id="运行一个shell脚本"><a href="#运行一个shell脚本" class="headerlink" title="运行一个shell脚本"></a>运行一个shell脚本</h3><p>运行一个脚本有两种方式：</p>
<ol>
<li>以bash来执行这个脚本<ul>
<li><code># sh hello.sh</code></li>
<li><code># bash hello.sh</code></li>
<li><code># sh -x hello.sh</code> 用<code>-x</code>选项用来查看shell脚本的执行过程，方便debug。</li>
</ul>
</li>
<li>以可执行文件的方式来执行这个脚本<ul>
<li><code># chmod +x hello.sh</code> 使用这种执行方式要使该脚本文件具有可执行的权限。</li>
<li><code>./hello.sh</code>或该文件的绝对路径名称。</li>
</ul>
</li>
</ol>
<h2 id="date命令"><a href="#date命令" class="headerlink" title="date命令"></a>date命令</h2><p>date命令常用语shell脚本中。</p>
<p>该命令常用的几个选项如下：</p>
<ul>
<li><code>date +%Y</code>：表示以四位数字格式打印年份</li>
<li><code>date +%y</code>：表示以两位数字格式打印年份</li>
<li><code>date +%m</code>：表示月份</li>
<li><code>date +%d</code>：表示日期</li>
<li><code>date +%H</code>：表示小时</li>
<li><code>date +%M</code>：表示分钟</li>
<li><code>date +%S</code>：表示秒</li>
<li><code>date +%w</code>：表示星期几。结果显示0则表示周日</li>
<li><code>date +%W</code>：表示目前所在星期是一年中的第多少个星期</li>
</ul>
<p>该命令在shell中最常用的几个选项如下：</p>
<ul>
<li><code>date +%Y-%m-%d</code>：输出四位的年月日，格式 2017-09-21</li>
<li><code>date +%y-%m-%d</code>：输出两位的年月日，格式 17-09-21</li>
<li><code>date +%F</code>：相当于<code>date +%Y-%m-%d</code></li>
<li><code>date +%H:%M:%S</code>：输出时间，格式 16:22:30</li>
<li><code>date +%T</code>：等同于上面</li>
<li><code>date +%s</code>：时间戳</li>
<li><code>date -d @时间戳</code>：根据时间戳反推出时间</li>
<li><code>date -d &quot;+1 day&quot; +%d</code>：一天后</li>
<li><code>date -d &quot;-1 day&quot; +%d</code>：一天前</li>
<li><code>date -d &quot;-1 hour&quot; +%H</code>：一个小时前</li>
<li><code>date -d &quot;-1 month&quot; +%m</code>：一个月前</li>
<li><code>date -d &quot;-1 min&quot; +%M</code>：一分钟前</li>
</ul>
<h1 id="shell脚本中的变量"><a href="#shell脚本中的变量" class="headerlink" title="shell脚本中的变量"></a>shell脚本中的变量</h1><h2 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h2><h3 id="变量的定义和使用"><a href="#变量的定义和使用" class="headerlink" title="变量的定义和使用"></a>变量的定义和使用</h3><p>定义变量的格式为：<code>变量名=变量的值</code><br>使用变量时需要在变量前面加上这个符号<code>$</code></p>
<h3 id="变量的常用用法"><a href="#变量的常用用法" class="headerlink" title="变量的常用用法"></a>变量的常用用法</h3><h4 id="反引号的使用"><a href="#反引号的使用" class="headerlink" title="反引号的使用"></a>反引号的使用</h4><p>使用反引号，可以将一条命令的执行结果赋值给一个变量，如：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">d1</span>=`date +F%T`</div><div class="line">echo <span class="string">"<span class="variable">$d1</span>"</span></div></pre></td></tr></table></figure></p>
<h4 id="数学运算"><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h4><p>shell脚本中变量的数学运算有两种方式，如下：</p>
<ol>
<li><code>c=$[$a+$b]</code></li>
<li><code>c=$(($a+$b))</code></li>
</ol>
<p>但是，shell脚本默认是不支持小数的，如果我们需要用到小数，比如保留两位小数点时，我们可以这样来实现：<br><code># echo &quot;scale=2;10/3&quot; | bc</code></p>
<h4 id="和用户交互"><a href="#和用户交互" class="headerlink" title="和用户交互"></a>和用户交互</h4><p>read命令用于和用户交互，它把用户输入的字符串作为变量值。常用格式为:<code>read &quot;提示的内容：&quot; 变量名</code></p>
<p>示例脚本如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line"><span class="comment">## Using 'read' in shell script.</span></div><div class="line"><span class="comment">## Theshu 2017-09-21</span></div><div class="line"></div><div class="line"><span class="built_in">read</span> -p <span class="string">"Please input a number: "</span> x</div><div class="line"><span class="built_in">read</span> -p <span class="string">"Please input another number: "</span> y</div><div class="line">sum=$[<span class="variable">$x</span>+<span class="variable">$y</span>]</div><div class="line"><span class="built_in">echo</span> <span class="string">"The sum of two numbers is: <span class="variable">$sum</span>"</span></div></pre></td></tr></table></figure></p>
<h2 id="预设变量"><a href="#预设变量" class="headerlink" title="预设变量"></a>预设变量</h2><p>在shell脚本执行时，后面可以跟一个或多个参数。在shell中有一些预设的变量可以表示这些参数（这些预设的变量从理论上看是没有限制的）。</p>
<p>常用的几个预设变量如下：</p>
<ul>
<li><code>$#</code>：表示总共有几个参数</li>
<li><code>$0</code>：表示命令或脚本名本身</li>
<li><code>$1</code>：表示后面跟的第一个参数</li>
<li><code>$2</code>：表示后面跟的第二个参数</li>
<li><code>$n</code>：表示后面跟的第n个参数</li>
</ul>
<p>示例脚本如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment"># use $1 and $2 </span></div><div class="line"><span class="comment"># Theshu 2017-09-21</span></div><div class="line"></div><div class="line">sum=$[<span class="variable">$1</span>+<span class="variable">$2</span>]</div><div class="line"><span class="built_in">echo</span> <span class="string">"sum=<span class="variable">$sum</span>"</span></div></pre></td></tr></table></figure></p>
<h1 id="shell脚本中的逻辑判断"><a href="#shell脚本中的逻辑判断" class="headerlink" title="shell脚本中的逻辑判断"></a>shell脚本中的逻辑判断</h1><h2 id="if-语句"><a href="#if-语句" class="headerlink" title="if 语句"></a>if 语句</h2><p>if语句常用于判断某些条件满足时执行哪些语句，不满足时又执行哪些语句。其格式有以下三种。</p>
<h3 id="不带else的if语句"><a href="#不带else的if语句" class="headerlink" title="不带else的if语句"></a>不带else的if语句</h3><p>格式如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> 判断语句</div><div class="line"><span class="keyword">then</span></div><div class="line">	<span class="built_in">command</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure></p>
<h3 id="带有else的if语句"><a href="#带有else的if语句" class="headerlink" title="带有else的if语句"></a>带有else的if语句</h3><p>格式如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> 判断语句</div><div class="line"><span class="keyword">then</span></div><div class="line">	command1</div><div class="line"><span class="keyword">else</span></div><div class="line">	command2</div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure></p>
<h3 id="带有elif的if语句"><a href="#带有elif的if语句" class="headerlink" title="带有elif的if语句"></a>带有elif的if语句</h3><p>格式如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> 判断语句1</div><div class="line"><span class="keyword">then</span></div><div class="line">	command1</div><div class="line"><span class="keyword">elif</span> 判断语句2</div><div class="line"><span class="keyword">then</span></div><div class="line">	command2</div><div class="line">......</div><div class="line"><span class="keyword">elif</span> 判断语句n</div><div class="line"><span class="keyword">then</span></div><div class="line">	<span class="built_in">command</span>(n)</div><div class="line"><span class="keyword">else</span></div><div class="line">	<span class="built_in">command</span>(n+1)</div></pre></td></tr></table></figure></p>
<h2 id="case-语句"><a href="#case-语句" class="headerlink" title="case 语句"></a>case 语句</h2><p>当有多个判断条件时，除了用带有elif的if语句外，还可以用case语句来实现。</p>
<p>格式如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">case</span> 变量 <span class="keyword">in</span></div><div class="line">	value1)</div><div class="line">		command1</div><div class="line">		;;</div><div class="line">	value2)</div><div class="line">		command2</div><div class="line">		;;</div><div class="line">	......</div><div class="line">	valuen)</div><div class="line">		<span class="built_in">command</span>(n)</div><div class="line">		;;</div><div class="line">	*)</div><div class="line">		<span class="built_in">command</span>(n+1)</div><div class="line">		;;</div><div class="line"><span class="keyword">esac</span></div></pre></td></tr></table></figure></p>
<h2 id="条件表达式（即判断语句）"><a href="#条件表达式（即判断语句）" class="headerlink" title="条件表达式（即判断语句）"></a>条件表达式（即判断语句）</h2><p>一个特殊的条件表达式：</p>
<ul>
<li><code>:</code>表示条件为真</li>
</ul>
<h3 id="以-条件表达式-来表示判断语句"><a href="#以-条件表达式-来表示判断语句" class="headerlink" title="以((条件表达式))来表示判断语句"></a>以<code>((条件表达式))</code>来表示判断语句</h3><p>这种格式在判断数值大小时最为方便，比如：<br><code>(($a &gt; 60))</code></p>
<p>在这种格式下，可以用&lt;、&lt;=、&gt;、&gt;=、==、!=这些数学符号。</p>
<h3 id="以-条件表达式-条件表达式来表示判断语句"><a href="#以-条件表达式-条件表达式来表示判断语句" class="headerlink" title="以[[ 条件表达式 ]]条件表达式来表示判断语句"></a>以<code>[[ 条件表达式 ]]条件表达式</code>来表示判断语句</h3><p>这种格式在判断小数值的大小时最为方便，比如：<br><code>[[ $a &gt; 1.5 ]]</code></p>
<h3 id="以-条件表达式-来表示判断语句-1"><a href="#以-条件表达式-来表示判断语句-1" class="headerlink" title="以[ 条件表达式 ]来表示判断语句"></a>以<code>[ 条件表达式 ]</code>来表示判断语句</h3><p>这种格式最为常用，但是这种格式下，不能用那些数学符号来表示数值关系了（除==外）。</p>
<p>在这种格式下，常用的判断符号有：</p>
<ul>
<li>判断数值大小<ul>
<li>-lt：小于</li>
<li>-gt：大于</li>
<li>-le：小于等于</li>
<li>-ge：大于等于</li>
<li>-eq：等于（也可以使用==）</li>
<li>-ne：不等于</li>
</ul>
</li>
<li>判断属性的符号<ul>
<li>-e：判断文件或目录是否存在</li>
<li>-d：判断是不是目录以及是否存在</li>
<li>-f：判断是不是普通文件以及是否存在</li>
<li>-r：判断是否有读权限</li>
<li>-w：判断是否有写权限</li>
<li>-x：判断是否有执行权限</li>
<li>-z：判断某个变量是否为空</li>
<li>使用if判断时具体的格式如下（例子）：  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> [ -e filename ]</div><div class="line"><span class="keyword">then</span></div><div class="line">	<span class="built_in">command</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>说明：</p>
<ul>
<li>shell脚本中的语句可以以分号结尾，也可以不用分号，不用分号时以换行符结尾</li>
<li><code>[ 条件表达式 ]</code>这种格式中，中括号和条件表达式之间有空格</li>
<li>条件表达式中，变量名用双引号括起来更加准确，变量名和判断符号之前也要有空格</li>
</ul>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><p>逻辑运算符用于判断条件与条件之间的关系。有下面三个：</p>
<ol>
<li><code>&amp;&amp;</code>：表示并且的意思</li>
<li><code>||</code>：表示或者的意思</li>
<li><code>!</code>：表示非的意思</li>
</ol>
<p>常用格式：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="selector-attr">[ 条件表达式1 ]</span> <span class="selector-tag">&amp;</span><span class="selector-tag">&amp;</span> <span class="selector-attr">[ 条件表达式2 ]</span></div><div class="line"><span class="selector-attr">[ 条件表达式1 ]</span> || <span class="selector-attr">[ 条件表达式2 ]</span></div><div class="line">((条件表达式<span class="number">1</span>)) <span class="selector-tag">&amp;</span><span class="selector-tag">&amp;</span> ((条件表达式<span class="number">2</span>))</div><div class="line">((条件表达式<span class="number">1</span>)) || ((条件表达式<span class="number">2</span>))</div><div class="line"><span class="selector-attr">[ ! 条件表达式 ]</span> 表示不满足该条件时</div></pre></td></tr></table></figure></p>
<h1 id="shell脚本中的循环"><a href="#shell脚本中的循环" class="headerlink" title="shell脚本中的循环"></a>shell脚本中的循环</h1><h2 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h2><p>for循环结构是在日常工作中使用最频繁的循环结构。其格式为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> 变量名 <span class="keyword">in</span> 循环的条件</div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="built_in">command</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure></p>
<p>说明：</p>
<ul>
<li>循环的条件，可以是一组字符或者数字（用一个或多个空格隔开），也可以是一条命令的执行结果（用反引号把命令括起来，如`seq 1 5`表示从1到5的一个序列）。</li>
</ul>
<p>示例脚本如下（打印出1到5的数字）：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment">## use for</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `seq 1 5`</div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure></p>
<h2 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h2><p>while循环常用于编写死循环的脚本，用于监控某项服务。其格式为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> 条件</div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="built_in">command</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure></p>
<p>示例脚本如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">a=5</div><div class="line"><span class="keyword">while</span> [ <span class="variable">$a</span> -ge 1 ]</div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="built_in">echo</span> <span class="variable">$a</span></div><div class="line">	a=$[<span class="variable">$a</span>-1]</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure></p>
<p>另外可以用一个冒号代替循环条件，表示真，这样可以做到死循环。示例脚本如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line"><span class="keyword">while</span> : </div><div class="line"><span class="keyword">do</span></div><div class="line">	sleep 3</div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure></p>
<h2 id="select循环"><a href="#select循环" class="headerlink" title="select循环"></a>select循环</h2><p>select也是循环的一种，它比较适合在用户选择的情况下。接下来我们用一个例子来说明它的用法。</p>
<h3 id="一个例子"><a href="#一个例子" class="headerlink" title="一个例子"></a>一个例子</h3><p>比如，我们有这样一个需求，运行脚本后，让用户去选择数字，选择1运行w命令，选择2运行top命令，选择3运行free命令，选择4退出。脚本这样实现：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"Please chose a number, 1:run w, 2:run top, 3:run free, 4:quit"</span></div><div class="line"><span class="built_in">echo</span> </div><div class="line">select <span class="built_in">command</span> <span class="keyword">in</span> w top free quit</div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="keyword">case</span> <span class="variable">$command</span> <span class="keyword">in</span></div><div class="line">		w)</div><div class="line">			w</div><div class="line">			;;</div><div class="line">		top)</div><div class="line">			top</div><div class="line">			;;</div><div class="line">		free)</div><div class="line">			free</div><div class="line">			;;</div><div class="line">		quit)</div><div class="line">			<span class="built_in">exit</span></div><div class="line">			;;</div><div class="line">		*)</div><div class="line">			<span class="built_in">echo</span> <span class="string">"Please input a number:(1-4)."</span></div><div class="line">			;;</div><div class="line"><span class="keyword">esac</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<p>运行结果如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># sh select.sh</span></div><div class="line">Please chose a number, 1:run w, 2:run top, 3:run free, 4:quit</div><div class="line"></div><div class="line">1) w</div><div class="line">2) top</div><div class="line">3) free</div><div class="line">4) quit</div><div class="line"><span class="comment">#? 1</span></div><div class="line"> 19:41:01 up 13 min,  1 user,  load average: 0.00, 0.01, 0.04</div><div class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</div><div class="line">root     pts/0    192.168.0.100    19:30    5.00s  0.04s  0.00s w</div><div class="line"><span class="comment">#? 3</span></div><div class="line">              total        used        free      shared  buff/cache   available</div><div class="line">Mem:        2032156      109500     1791200        8748      131456     1765448</div><div class="line">Swap:       4194300           0     4194300</div><div class="line"><span class="comment">#? 4</span></div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure></p>
<p>说明：</p>
<ul>
<li>select默认会把序列号对应的命令列出来，每次输入一个数字，则会执行相应的命令，命令执行完后并不会退出脚本。它会继续让我们再次输入序号。</li>
<li>序号前面的提示符，我们是可以修改的，利用变量PS3即可。</li>
</ul>
<h3 id="例子改版1"><a href="#例子改版1" class="headerlink" title="例子改版1"></a>例子改版1</h3><p>利用PS3变量定义序号前的提示符，修改脚本如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">PS3=<span class="string">"Please select a number:"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"Please chose a number, 1:run w, 2:run top, 3:run free, 4:quit"</span></div><div class="line"><span class="built_in">echo</span> </div><div class="line"></div><div class="line">select <span class="built_in">command</span> <span class="keyword">in</span> w top free quit</div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="keyword">case</span> <span class="variable">$command</span> <span class="keyword">in</span></div><div class="line">		w)</div><div class="line">			w</div><div class="line">			;;</div><div class="line">		top)</div><div class="line">			top</div><div class="line">			;;</div><div class="line">		free)</div><div class="line">			free</div><div class="line">			;;</div><div class="line">		quit)</div><div class="line">			<span class="built_in">exit</span></div><div class="line">			;;</div><div class="line">		*)</div><div class="line">			<span class="built_in">echo</span> <span class="string">"Please input a number:(1-4)."</span></div><div class="line">			;;</div><div class="line"><span class="keyword">esac</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure></p>
<p>执行结果如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># sh select2.sh</span></div><div class="line">Please chose a number, 1:run w, 2:run top, 3:run free, 4:quit</div><div class="line"></div><div class="line">1) w</div><div class="line">2) top</div><div class="line">3) free</div><div class="line">4) quit</div><div class="line">Please select a number:1</div><div class="line"> 19:52:07 up 24 min,  1 user,  load average: 0.00, 0.01, 0.04</div><div class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</div><div class="line">root     pts/0    192.168.0.100    19:30    7.00s  0.07s  0.00s w</div><div class="line">Please select a number:3</div><div class="line">              total        used        free      shared  buff/cache   available</div><div class="line">Mem:        2032156      109496     1791192        8748      131468     1765444</div><div class="line">Swap:       4194300           0     4194300</div><div class="line">Please select a number:4</div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure></p>
<h3 id="例子改版2"><a href="#例子改版2" class="headerlink" title="例子改版2"></a>例子改版2</h3><p>如果想要脚本每次输入一个序号后就自动退出，则需要再次更改脚本如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">PS3=<span class="string">"Please select a number:"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"Please chose a number, 1:run w, 2:run top, 3:run free, 4:quit"</span></div><div class="line"><span class="built_in">echo</span> </div><div class="line"></div><div class="line">select <span class="built_in">command</span> <span class="keyword">in</span> w top free quit</div><div class="line"><span class="keyword">do</span></div><div class="line">	<span class="keyword">case</span> <span class="variable">$command</span> <span class="keyword">in</span></div><div class="line">		w)</div><div class="line">			w;<span class="built_in">exit</span></div><div class="line">			;;</div><div class="line">		top)</div><div class="line">			top;<span class="built_in">exit</span></div><div class="line">			;;</div><div class="line">		free)</div><div class="line">			free;<span class="built_in">exit</span></div><div class="line">			;;</div><div class="line">		quit)</div><div class="line">			<span class="built_in">exit</span></div><div class="line">			;;</div><div class="line">		*)</div><div class="line">			<span class="built_in">echo</span> <span class="string">"Please input a number:(1-4)."</span>;<span class="built_in">exit</span></div><div class="line">			;;</div><div class="line"><span class="keyword">esac</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure></p>
<p>执行结果如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># sh select3.sh</span></div><div class="line">Please chose a number, 1:run w, 2:run top, 3:run free, 4:quit</div><div class="line"></div><div class="line">1) w</div><div class="line">2) top</div><div class="line">3) free</div><div class="line">4) quit</div><div class="line">Please select a number:1</div><div class="line"> 19:55:14 up 27 min,  1 user,  load average: 0.08, 0.03, 0.04</div><div class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</div><div class="line">root     pts/0    192.168.0.100    19:30    2.00s  0.08s  0.00s w</div><div class="line"><span class="comment">#</span></div></pre></td></tr></table></figure></p>
<h1 id="shell脚本中的函数"><a href="#shell脚本中的函数" class="headerlink" title="shell脚本中的函数"></a>shell脚本中的函数</h1><p>在shell脚本中也可以使用函数，包括自定义的函数。其格式如下<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params"></span>)</span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">	command1</div><div class="line">	command2</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>示例脚本如下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line"><span class="keyword">function</span> sum()</div><div class="line">&#123;</div><div class="line">	sum=$[<span class="variable">$1</span>+<span class="variable">$2</span>]</div><div class="line">	<span class="built_in">echo</span> <span class="variable">$sum</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">sum <span class="variable">$1</span> <span class="variable">$2</span></div></pre></td></tr></table></figure></p>
<p>说明：</p>
<ul>
<li>函数必须定义在前，使用在后</li>
</ul>
<h1 id="shell脚本中的控制语句"><a href="#shell脚本中的控制语句" class="headerlink" title="shell脚本中的控制语句"></a>shell脚本中的控制语句</h1><ol>
<li>break语句：<code>break</code>用于结束本层循环</li>
<li>continue语句：<code>continue</code>忽略continue之下的代码，直接进行下一次循环</li>
<li>exit语句：<code>exit 数值</code>用于结束脚本的执行，并向系统返回后面的数值</li>
</ol>
<h1 id="shell脚本中的数组"><a href="#shell脚本中的数组" class="headerlink" title="shell脚本中的数组"></a>shell脚本中的数组</h1><p>关于shell脚本中的数组了解即可，因为它不常用。在平时的运维工作中，几乎用不到。但是这个概念还是需要了解一下。</p>
<h2 id="数组定义"><a href="#数组定义" class="headerlink" title="数组定义"></a>数组定义</h2><p>一对圆括号表示是数组，数组元素用”空格”符号分隔开。<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># a=(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>)</div><div class="line"># echo $a</div><div class="line"><span class="number">1</span></div></pre></td></tr></table></figure></p>
<p>说明；</p>
<ul>
<li>数组名代表的是数组的首个元素</li>
</ul>
<h2 id="数组读取"><a href="#数组读取" class="headerlink" title="数组读取"></a>数组读取</h2><ul>
<li><p>获取数组元素的个数：</p>
  <figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo <span class="variable">$&#123;</span><span class="comment">#a[@]&#125;</span></div></pre></td></tr></table></figure>
</li>
<li><p>读取数组中的某一个元素，数标从0开始，a[0]是第一个元素：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[2]&#125;</span></div></pre></td></tr></table></figure>
</li>
<li><p>打印整个数组的元素：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[*]&#125;</span></div><div class="line">或者</div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;a[@]&#125;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="数组赋值"><a href="#数组赋值" class="headerlink" title="数组赋值"></a>数组赋值</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># a[<span class="number">1</span>]=<span class="number">100</span></div><div class="line"># echo $&#123;a[*]&#125;</div><div class="line"><span class="number">1</span> <span class="number">100</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></div><div class="line"># a[<span class="number">5</span>]=<span class="number">100</span></div><div class="line"># echo $&#123;a[*]&#125;</div><div class="line"><span class="number">1</span> <span class="number">100</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">100</span></div></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>直接通过<code>数组名[下标]</code>就可以对其进行赋值</li>
<li>如果下标不存在，自动添加一个新的数组元素</li>
</ul>
<h2 id="数组的删除"><a href="#数组的删除" class="headerlink" title="数组的删除"></a>数组的删除</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> a=(1 2 3 4 5)</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">unset</span> a</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$&#123;a[*]&#125;</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> a=(1 2 3 4 5)</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">unset</span> a[1]</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$&#123;a[*]&#125;</span></span></div><div class="line">1 3 4 5</div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$&#123;#a[*]&#125;</span></span></div><div class="line">4</div></pre></td></tr></table></figure>
<h2 id="数组分片"><a href="#数组分片" class="headerlink" title="数组分片"></a>数组分片</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> a=(`seq 1 5`)</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$&#123;a[@]:0:3&#125;</span>	//表示从a[0]开始，依次向后输出3个元素</span></div><div class="line">1 2 3</div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$&#123;a[@]:1:4&#125;</span>	//表示从a[1]开始，依次向后输出4个元素</span></div><div class="line">2 3 4 5</div></pre></td></tr></table></figure>
<h2 id="数组替换"><a href="#数组替换" class="headerlink" title="数组替换"></a>数组替换</h2><p>可用echo替换（并非真正的改变值）：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># a=(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span>)</div><div class="line"># echo $&#123;a[@]/<span class="number">3</span>/<span class="number">100</span>&#125;</div><div class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">100</span> <span class="number">4</span> <span class="number">5</span></div><div class="line"># echo $&#123;a[@]&#125;</div><div class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></div></pre></td></tr></table></figure></p>
<p>可用赋值的方式来替换<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># a=($&#123;a[@]/<span class="number">3</span>/<span class="number">100</span>&#125;)</div><div class="line"># echo $&#123;a[@]&#125;</div><div class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">100</span> <span class="number">4</span> <span class="number">5</span></div></pre></td></tr></table></figure></p>
<h1 id="Shell脚本技巧"><a href="#Shell脚本技巧" class="headerlink" title="Shell脚本技巧"></a>Shell脚本技巧</h1><h2 id="使用-exec-重定向输出"><a href="#使用-exec-重定向输出" class="headerlink" title="使用 exec 重定向输出"></a>使用 exec 重定向输出</h2><p>使用<code>exec</code>可以把脚本中exec下面所用到的全部的命令重定向到某一个指定的文件。使用示例如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">d=`date +%F`</div><div class="line"><span class="built_in">exec</span> &gt; /tmp/<span class="variable">$d</span>.<span class="built_in">log</span> 2&gt;&amp;1</div><div class="line"><span class="built_in">echo</span> <span class="string">"Begin at `date`"</span></div><div class="line">ls /tmp/jlkfsksd</div><div class="line"><span class="built_in">cd</span> /sdfsdfas/</div><div class="line"><span class="built_in">echo</span> <span class="string">"End at `date`"</span></div></pre></td></tr></table></figure></p>
<p>这样的话在运行脚本的时候，屏幕上没有任何的信息输出，但是其全部信息都重定向到了指定的文件中了，可在相关文件中查阅。</p>
<h2 id="case-结构中的条件"><a href="#case-结构中的条件" class="headerlink" title="case 结构中的条件"></a>case 结构中的条件</h2><figure class="highlight coq"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">case</span> n <span class="built_in">in</span></div><div class="line">	<span class="number">1</span>|<span class="type">2</span>)</div><div class="line">		command1</div><div class="line">		;;</div><div class="line">	<span class="number">3</span>|<span class="type">4</span>)</div><div class="line">		command2</div><div class="line">		;;</div><div class="line">	*)</div><div class="line">		command3</div><div class="line">		;;</div></pre></td></tr></table></figure>
<p>如上，在右半括号之前可以写多个条件，用或字符分割，这样可以达到满足多个条件时执行相同的下一步。</p>
<blockquote>
<p>OK</p>
</blockquote>
</div><div class="tags"><a href="/tags/Shell/">Shell</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/09/21/技术/002. FTP服务配置（Aming）/" class="pre">FTP服务配置（Aming）</a><a href="/2017/09/20/技术/001. NFS服务简单配置（Aming）/" class="next">NFS服务简单配置（Aming）</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#什么是shell脚本"><span class="toc-text">什么是shell脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#shell脚本的创建和运行"><span class="toc-text">shell脚本的创建和运行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建一个shell脚本"><span class="toc-text">创建一个shell脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#运行一个shell脚本"><span class="toc-text">运行一个shell脚本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#date命令"><span class="toc-text">date命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell脚本中的变量"><span class="toc-text">shell脚本中的变量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义变量"><span class="toc-text">自定义变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量的定义和使用"><span class="toc-text">变量的定义和使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#变量的常用用法"><span class="toc-text">变量的常用用法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#反引号的使用"><span class="toc-text">反引号的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数学运算"><span class="toc-text">数学运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#和用户交互"><span class="toc-text">和用户交互</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#预设变量"><span class="toc-text">预设变量</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell脚本中的逻辑判断"><span class="toc-text">shell脚本中的逻辑判断</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#if-语句"><span class="toc-text">if 语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#不带else的if语句"><span class="toc-text">不带else的if语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#带有else的if语句"><span class="toc-text">带有else的if语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#带有elif的if语句"><span class="toc-text">带有elif的if语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#case-语句"><span class="toc-text">case 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#条件表达式（即判断语句）"><span class="toc-text">条件表达式（即判断语句）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#以-条件表达式-来表示判断语句"><span class="toc-text">以((条件表达式))来表示判断语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#以-条件表达式-条件表达式来表示判断语句"><span class="toc-text">以[[ 条件表达式 ]]条件表达式来表示判断语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#以-条件表达式-来表示判断语句-1"><span class="toc-text">以[ 条件表达式 ]来表示判断语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#逻辑运算符"><span class="toc-text">逻辑运算符</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell脚本中的循环"><span class="toc-text">shell脚本中的循环</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#for循环"><span class="toc-text">for循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#while循环"><span class="toc-text">while循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#select循环"><span class="toc-text">select循环</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一个例子"><span class="toc-text">一个例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#例子改版1"><span class="toc-text">例子改版1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#例子改版2"><span class="toc-text">例子改版2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell脚本中的函数"><span class="toc-text">shell脚本中的函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell脚本中的控制语句"><span class="toc-text">shell脚本中的控制语句</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#shell脚本中的数组"><span class="toc-text">shell脚本中的数组</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#数组定义"><span class="toc-text">数组定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组读取"><span class="toc-text">数组读取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组赋值"><span class="toc-text">数组赋值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组的删除"><span class="toc-text">数组的删除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组分片"><span class="toc-text">数组分片</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组替换"><span class="toc-text">数组替换</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell脚本技巧"><span class="toc-text">Shell脚本技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-exec-重定向输出"><span class="toc-text">使用 exec 重定向输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#case-结构中的条件"><span class="toc-text">case 结构中的条件</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/01/24/Linux/018. Linux基础部分补充内容/">Linux基础部分补充内容</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/24/Linux/017. Linux系统日志介绍/">Linux系统日志介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/24/Linux/016. Linux数据备份技术/">Linux数据备份技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/24/Linux/015. Linux系统服务管理技术/">Linux系统服务管理技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/24/Linux/014. Linux防火墙的简单管理/">Linux防火墙的简单管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/20/Linux/013. Linux程序管理技术/">Linux程序管理技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/19/Linux/012. 正则表达式实用技术/">正则表达式实用技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/19/Linux/011. Linux计划任务管理技术/">Linux计划任务管理技术</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/29/Tool/007. 《Vim实用技巧》-开始：Vim解决问题的方式/">《Vim实用技巧》-开始：Vim解决问题的方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/28/Tool/006. Vim的语言性思维/">Vim的语言性思维</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reading/">Reading</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tool/">Tool</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Technology/">技术</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zhuanzai/">转载</a><span class="category-list-count">3</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">奇怪先生theshu.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>