<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="奇怪先生的博客"><title>Shell基础知识 | 奇怪先生的博客</title><link rel="stylesheet" type="text/css" href="//fonts.css.network/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Shell基础知识</h1><a id="logo" href="/.">奇怪先生的博客</a><p class="description">耳目得来终觉浅，觉知此事要躬行。</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">Shell基础知识</h1><div class="post-meta"><a href="/2017/09/03/Shell基础知识/#comments" class="comment-count"></a><p><span class="date">Sep 03, 2017</span><span><a href="/categories/Shell/" class="category">Shell</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><blockquote>
<p>这些内容是在学习Shell脚本之前必须要掌握的Shell基础知识。</p>
</blockquote>
<h1 id="Shell-初相识"><a href="#Shell-初相识" class="headerlink" title="Shell 初相识"></a>Shell 初相识</h1><h2 id="什么是Shell"><a href="#什么是Shell" class="headerlink" title="什么是Shell"></a>什么是Shell</h2><p>Shell 是系统跟计算机硬件交互时使用的中间介质，它只是系统的一个工具。在Shell和计算机硬件中间还有一层东西，那就是系统内核。用户在使用计算机的时候，直接面对的并不是计算机硬件，而是Shell，用户把指令告诉Shell，然后Shell再传输给系统内核，接着内核再去支配计算机硬件去执行各种操作。</p>
<p>Shell的版本有很多，但是初学时所接触的Linux发布版本（RedHat或CentOS系列）默认安装的Shell版本是bash（即Bourne Again Shell），它是sh（Bourne Shell）的增强版本。Bourne Shell是最早流行起来的一个Shell版本。其创始人是Steven Bourne，为了纪念他而将其命名为Bourne Shell，简称sh。</p>
<h2 id="Shell的特性"><a href="#Shell的特性" class="headerlink" title="Shell的特性"></a>Shell的特性</h2><h3 id="命令记录历史"><a href="#命令记录历史" class="headerlink" title="命令记录历史"></a>命令记录历史</h3><h4 id="history"><a href="#history" class="headerlink" title="history"></a>history</h4><p><code>history</code>：用来查看命令历史列表。</p>
<p>我们执行过的命令bash都会记录，预设可以记录1000条历史命令，这些命令保存在用户的家目录下的 .bash_history 文件中。但需要注意的是，只有当用户正常退出当前Shell时，在当前Shell中运行过的命令才会保存至该文件里。</p>
<h4 id="关于-的几个用法"><a href="#关于-的几个用法" class="headerlink" title="关于!的几个用法"></a>关于<strong>!</strong>的几个用法</h4><p><code>!</code>是与命令历史有关的一个特殊字符，该字符常用的应用有一下几个：</p>
<ol>
<li><code>!!</code>：连续两个!表示执行上一条命令。</li>
<li><code>!n</code>：这里的n是数字，表示执行命令历史中的第n条命令。可用命令<code>history</code>查看历史命令列表。</li>
<li><code>!字符串（字符串大于等于1）</code>：执行最近一次以该字符串开头的命令</li>
<li><code>!$</code>：使用上一次命令的最后一个参数</li>
</ol>
<h3 id="命令和文件名补全"><a href="#命令和文件名补全" class="headerlink" title="命令和文件名补全"></a>命令和文件名补全</h3><p><code>Tab</code>按键可以补全命令、补全路径或者一个文件名。连续按两次该键会把所有命令或文件名都显示出来。</p>
<ul>
<li>命令补全</li>
<li>目录补全和文件名补全</li>
<li>命令参数补全</li>
</ul>
<h3 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h3><h4 id="alias-设置别名"><a href="#alias-设置别名" class="headerlink" title="alias  设置别名"></a>alias  设置别名</h4><p>格式 <code>alias 别名字符串=&#39;所要替代的指令和该指令的参数&#39;</code></p>
<p>直接执行 <code>alias</code> 会把目前系统预设的别名全部列出来。</p>
<p>配置文件  ~/.bashrc中加入想要的别名设置语句即可。</p>
<h4 id="unalias-取消别名"><a href="#unalias-取消别名" class="headerlink" title="unalias  取消别名"></a>unalias  取消别名</h4><p>格式 <code>unalias 别名字符串</code></p>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p>在bash下、可以使用*来匹配零个或多个字符，用?匹配一个字符，[]匹配里面的任一个字符。</p>
<h3 id="输入-输出重定向"><a href="#输入-输出重定向" class="headerlink" title="输入/输出重定向"></a>输入/输出重定向</h3><table>
<thead>
<tr>
<th>符号</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>&gt;</td>
<td>输出重定向</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>输出追加重定向</td>
</tr>
<tr>
<td>&lt;</td>
<td>输入重定向（例子：<code>mail -s &quot;zhuti&quot; somebody@host.com &lt; 邮件内容文件.txt</code>）</td>
</tr>
<tr>
<td>2&gt;</td>
<td>错误输出重定向</td>
</tr>
<tr>
<td>2&gt;&gt;</td>
<td>错误输出追加重定向</td>
</tr>
<tr>
<td>2&gt;&amp;1</td>
<td>相当于 &gt; 1.txt 2&gt; 1.txt</td>
</tr>
<tr>
<td>2&gt;&gt;&amp;1</td>
<td>相当于 &gt;&gt; 1.txt 2&gt;&gt; 1.txt</td>
</tr>
</tbody>
</table>
<h3 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h3><p>管道符<code>|</code>，它用于将前一个指令的标准输出作为后一个指令的参数。</p>
<h3 id="作业控制"><a href="#作业控制" class="headerlink" title="作业控制"></a>作业控制</h3><p>当运行程序时，可以使它暂停（按Ctrl+Z组合键），然后使用fg（foreground的简写）命令恢复它，或是用bg（background的简写）命令使它到后台运行（或是在运行命令的时候在命令后面加一个&amp;符号）。此外，还可以使它终止运行（按Ctrl+C组合键）。</p>
<p>多个被暂停的任务会有编号，使用jobs命令可以查看到放在后台的任务列表以及它们的编号，ID号后面有+ 或 -   ，表示优先级。+比-优先级高。在这时使用bg或者fg命令时，则需要在后面加上编号。若不加编号，默认恢复优先级高的。</p>
<p>如何关掉在后台运行的任务呢？这分两种情况：</p>
<ol>
<li>如果你没有退出Shell，则应先使用 <code>fg 编号</code> 把任务调到前台，然后按Ctrl+C组合键结束任务。</li>
<li>关闭了当前Shell，再次打开另一个Shell时，使用jobs命令并不会显示在后台运行或者被暂停的任务。要想关闭这些任务，则需要先知道它们的PID。用这个命令 <code>ps aux | grep 关键字</code> 找到这个进程。若是想结束这个进程，需要使用到kill命令。</li>
</ol>
<p>kill命令很简单，直接在后面加PID即可 <code>kill PID</code>。如果遇到结束不了的进程时，可以在Kill后面加一个选项，即 <code>kill -9 PID</code>。</p>
<p>总结：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl+Z</td>
<td>暂停</td>
</tr>
<tr>
<td>fg [编号]</td>
<td>继续任务</td>
</tr>
<tr>
<td>bg [编号]</td>
<td>使命令进到后台</td>
</tr>
<tr>
<td>命令 &amp;</td>
<td>使命令到后台运行</td>
</tr>
<tr>
<td>jobs</td>
<td>查看进程列表和编号</td>
</tr>
<tr>
<td>Ctrl+C</td>
<td>结束当前任务</td>
</tr>
<tr>
<td>ps aux</td>
<td>查看相关进程的PID</td>
</tr>
<tr>
<td>kill [-9] PID</td>
<td>结束进程</td>
</tr>
</tbody>
</table>
<h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><p>在Linux系统中预设了很多变量，可以供我们使用。我们也可以自定义一些变量，包括局部变量和全局变量。</p>
<h2 id="echo-变量名"><a href="#echo-变量名" class="headerlink" title="echo $变量名"></a>echo $变量名</h2><blockquote>
<p><code>echo $变量名</code> 用于查看一个变量的值。</p>
</blockquote>
<h2 id="env"><a href="#env" class="headerlink" title="env"></a>env</h2><blockquote>
<p><code>env</code> 用于查看系统的全部环境变量。</p>
</blockquote>
<p>登陆不同的用户，这些环境变量的值也不同。常见的环境变量如下：</p>
<table>
<thead>
<tr>
<th>变量名</th>
<th>值的意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>HOSTNAME</td>
<td>主机名</td>
</tr>
<tr>
<td>SHELL</td>
<td>当前用户的Shell类型</td>
</tr>
<tr>
<td>HISTSIZE</td>
<td>命令历史记录数</td>
</tr>
<tr>
<td>MAIL</td>
<td>当前用户的邮件存放目录</td>
</tr>
<tr>
<td>PATH</td>
<td>该变量决定了Shell将到哪些目录中寻找命令或程序</td>
</tr>
<tr>
<td>PWD</td>
<td>当前目录</td>
</tr>
<tr>
<td>LANG</td>
<td>这是与语言相关的环境变量，多语言环境可以修改此环境变量</td>
</tr>
<tr>
<td>HOME</td>
<td>当前用户的家目录</td>
</tr>
<tr>
<td>LOGNAME</td>
<td>当前用户的登陆名</td>
</tr>
</tbody>
</table>
<p>注意：env命令显示的变量只是环境变量，系统预设的变量其实还有很多，这就需要用到下面的set命令了。</p>
<h2 id="set-和-unset"><a href="#set-和-unset" class="headerlink" title="set 和 unset"></a>set 和 unset</h2><blockquote>
<p><code>set</code> 用于查看系统里的全部变量，包括环境变量和用户自定义变量。<br><code>unset 变量名</code> 可取消或删除一个变量</p>
</blockquote>
<h2 id="export-变量名"><a href="#export-变量名" class="headerlink" title="export 变量名"></a>export 变量名</h2><blockquote>
<p><code>export 变量名</code> 声明一个变量为全局变量。</p>
</blockquote>
<h2 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h2><h3 id="定义变量的方式"><a href="#定义变量的方式" class="headerlink" title="定义变量的方式"></a>定义变量的方式</h3><ol>
<li><code>变量=值</code>  只能在当前Shell中使用，不能在子Shell中使用。</li>
<li><code>export 变量=值</code> 设置了一个全局变量，可以在当前Shell和子Shell中使用。</li>
</ol>
<h3 id="自定义变量的规则"><a href="#自定义变量的规则" class="headerlink" title="自定义变量的规则"></a>自定义变量的规则</h3><ol>
<li>设定变量的格式为<code>a=b</code>，其中a为变量名，b为变量的值，等号两边不能有空格。</li>
<li>变量名只能由字母、数字以及下划线组成，且不能以数字开头。</li>
<li>当变量内容带有特殊字符时，需要进行特殊处理，如下：<ul>
<li>当变量内容带有空格时，需要给该变量加上单引号。如 myname=’Aming Linux’</li>
<li>当变量内容带有单引号，需要给该变量加上双引号。如 myname=”I’m a cocker”</li>
<li>若变量内容中需要用到其它命令，只使用该命令的运行结果作为变量的值，则该命令需要加上反引号。如 myname=`pwd`</li>
<li>变量内容可以累加其它变量的内容，但需要加双引号。如 myname=”$LOGNAME”Aming<ul>
<li>b=$a”123”  或  b=$a’123’</li>
<li>c=$a$b</li>
<li>a=$a”增加值”</li>
</ul>
</li>
</ul>
</li>
<li>注意单引号、双引号和反引号的使用区别：<ul>
<li>单引号：里面的内容全部是普通字符</li>
<li>双引号：里面的内容带有本身的意义，比如某个变量</li>
<li>反引号：里面的内容为一个命名，所代表的是该命令执行之后的结果</li>
</ul>
</li>
</ol>
<h3 id="让自定义变量一直生效"><a href="#让自定义变量一直生效" class="headerlink" title="让自定义变量一直生效"></a>让自定义变量一直生效</h3><p>如果想要使自定义的变量一直生效，该如何办到呢？分以下两种情况：</p>
<ol>
<li>允许系统内所有用户登陆后都可以使用该变量。<ul>
<li>在/etc/profile文件的最后一行加入<code>export 变量=值</code></li>
<li>运行<code>source /etc/profile</code>或<code>. /etc/profile</code>让此配置文件生效</li>
<li>目的达到</li>
</ul>
</li>
<li>仅允许当前用户使用该变量。<ul>
<li>在用户家目录下的.bashrc文件的最后一行加入<code>export 变量=值</code></li>
<li>运行<code>source .bashrc</code>或<code>. .bashrc</code>让配置文件生效</li>
<li>目的达到</li>
</ul>
</li>
</ol>
<h1 id="变量的配置文件"><a href="#变量的配置文件" class="headerlink" title="变量的配置文件"></a>变量的配置文件</h1><p>这些配置文件总结如下表：</p>
<table>
<thead>
<tr>
<th>配置文件名</th>
<th>文件的作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>/etc/profile</td>
<td>这个文件预设了几个重要的变量，例如PATH、USER、LOGNAME、MAIL、INPUTRC、HOSTNAME、HISTSIZE、umask等</td>
</tr>
<tr>
<td>/etc/bashrc</td>
<td>这个文件主要预设umask以及PS1</td>
</tr>
<tr>
<td>.bash_profile</td>
<td>该文件定义了用户的个人化路径与环境变量的文件名称。每个用户都可以使用该文件输入专属于自己的shell信息，当用户登陆时，该文件仅仅执行一次</td>
</tr>
<tr>
<td>.bashrc</td>
<td>该文件包含专属于自己的shell的bash信息，当登陆或每次打开新的shell时，该文件会被读取。例如，用户可以将自己定义的别名或者自定义变量写到这个文件中</td>
</tr>
<tr>
<td>.bash_history</td>
<td>该文件用于记录命令历史</td>
</tr>
<tr>
<td>.bash_logout</td>
<td>当退出shell时，会执行该文件。可以将一些清理的工作放到这个文件中</td>
</tr>
</tbody>
</table>
<h2 id="PS1变量的说明"><a href="#PS1变量的说明" class="headerlink" title="PS1变量的说明"></a>PS1变量的说明</h2><p>这个PS1就是我们在输入命令时前面的那串字符。如 <code>[root@AmingLinux-105 ~]#</code>，我们来查看一下PS1的值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 ~]# echo $PS1</div><div class="line">[\u@\h \W]\$</div></pre></td></tr></table></figure></p>
<p>其中，\u是用户名，\h是主机名，\W当前目录名，（\w表示的是工作目录的完整绝对路径），\$代表用户身份字符（root为#，普通用户为$）</p>
<h1 id="Shell-中的特殊符号"><a href="#Shell-中的特殊符号" class="headerlink" title="Shell 中的特殊符号"></a>Shell 中的特殊符号</h1><h2 id="特殊符号"><a href="#特殊符号" class="headerlink" title="特殊符号"></a>特殊符号</h2><table>
<thead>
<tr>
<th>特殊符号</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>代表零个或多个任意字符</td>
</tr>
<tr>
<td>?</td>
<td>只代表一个任意字符</td>
</tr>
<tr>
<td>#</td>
<td>注释符，这个符号在Linux中表示注释说明，在后面的内容都会被忽略</td>
</tr>
<tr>
<td>\</td>
<td>脱义字符，将后面的特殊字符还原为普通字符</td>
</tr>
<tr>
<td>管道符</td>
<td>将前面命令的输出作为后面命令的输入。支持它的工具有cat、less、head、tail、grep、cut、sort、wc、uniq、tee、tr、split、sed、awk等</td>
</tr>
<tr>
<td>$变量名</td>
<td>它可以作为变量前面的标识符      </td>
</tr>
<tr>
<td>$?</td>
<td>表示上一条的命令执行的返回值，若为0则正确执行，若非零则错误执行</td>
</tr>
<tr>
<td>!$</td>
<td>表示上条命令中的最后一个变量</td>
</tr>
<tr>
<td>;</td>
<td>如果在多条命令中间使用这个符号连接，则表示按顺序依次执行</td>
</tr>
<tr>
<td>~</td>
<td>代表用户的家目录，用于<code>cd ~</code></td>
</tr>
<tr>
<td>&amp;</td>
<td>表示把命令放到后台执行，用于<code>命令 &amp;</code>；&amp;&amp;代表逻辑与；&amp;1代表参数1</td>
</tr>
<tr>
<td>重定向</td>
<td>&gt;、&gt;&gt;、2&gt;、2&gt;&gt;、&lt;</td>
</tr>
<tr>
<td>中括号[]</td>
<td>中括号内为字符组合中的任意一个，可以是一个范围（[1-3a-z]）</td>
</tr>
</tbody>
</table>
<p>还有两个符号&amp;&amp;和||，将与;放在一起进行总结：</p>
<ul>
<li><code>command1 ; command2</code>   不管command1是否执行成功，都会执行command2</li>
<li><code>command1 &amp;&amp; command2</code>  只有command1执行成功后，才会执行command2</li>
<li><code>command1 || command2</code>  只有command1执行失败了，才会执行command2</li>
</ul>
<h2 id="几个常用的管道命令"><a href="#几个常用的管道命令" class="headerlink" title="几个常用的管道命令"></a>几个常用的管道命令</h2><h3 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h3><blockquote>
<p>cut 用来截取某一个字段。</p>
</blockquote>
<p>格式 <code>cut -d &#39;分隔字符&#39; [-cf] n</code>，这里n是数字。其选项说明如下：</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d</td>
<td>后面跟分隔字符，分隔字符要用单引号括起来</td>
</tr>
<tr>
<td>-c</td>
<td>后面接的是第几个字符</td>
</tr>
<tr>
<td>-f</td>
<td>后面接的是第几个区块</td>
</tr>
</tbody>
</table>
<p>cut命令的用法说明：</p>
<ul>
<li><p>-d选项后面加冒号作为分隔字符，-f 1 表示截取第一段，-f和1之间的空格可有可无。示例如下：</p>
<ul>
<li><code>cut -d ‘分隔符’ -f 1  filename</code></li>
<li><code>cut -d ‘分隔符’ -f 1,2  filename</code></li>
<li><code>cut -d ‘分隔符’ -f 1-4  filename</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 ~]# cat /etc/passwd | cut -d &apos;:&apos; -f 1 | head -5</div><div class="line">root</div><div class="line">bin</div><div class="line">daemon</div><div class="line">adm</div><div class="line">lp</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>-c选项后面可以一个数字n，也可以是一个区间n1-n2，还可以是多个数字n1,n2,n3。示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 ~]# head -n2 /etc/passwd | cut -c2</div><div class="line">o</div><div class="line">i</div><div class="line">[root@AmingLinux-105 ~]# head -n2 /etc/passwd | cut -c1</div><div class="line">r</div><div class="line">b</div><div class="line">[root@AmingLinux-105 ~]# head -n2 /etc/passwd | cut -c1-10</div><div class="line">root:x:0:0</div><div class="line">bin:x:1:1:</div><div class="line">[root@AmingLinux-105 ~]# head -n2 /etc/passwd | cut -c1,3,10</div><div class="line">ro0</div><div class="line">bn:</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><blockquote>
<p>sort 用作排序</p>
</blockquote>
<p>格式 <code>sort [-t 分隔符] [-kn1,n2] [-nru]</code>，这里的n1和n2指的是数字，其它选项的含义如下</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-t</td>
<td>后面跟分隔字符，作用跟cut的-d选项一样</td>
</tr>
<tr>
<td>-n</td>
<td>表示使用纯数字排序</td>
</tr>
<tr>
<td>-r</td>
<td>表示反向排序</td>
</tr>
<tr>
<td>-u</td>
<td>表示去重复</td>
</tr>
<tr>
<td>-kn1,n2</td>
<td>表示由n1区间排序到n2区间，可以只写-kn1，表示只对n1字段排序</td>
</tr>
</tbody>
</table>
<p>sort 命令的用法示例：</p>
<ol>
<li><p>sort 如果不加任何选项，则从首字符向后依次按ASCII码值进行比较，最后将它们按升序输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 ~]# head -n5 /etc/passwd | sort</div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">root:x:0:0:root:/root:/bin/bash</div></pre></td></tr></table></figure>
</li>
<li><p>-t 选项后面跟分隔符，-k 选项后面跟单个数字表示对第几个区域的字符串排序，-n选项则表示用纯数字排序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 ~]# head -n5 /etc/passwd | sort -t: -k3 -n</div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div></pre></td></tr></table></figure>
</li>
<li><p>-k 选项后面跟数字n1和n2表示对第n1和n2区域内的字符串排序，-r选项则表示反向排序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 ~]# head -n5 /etc/passwd | sort -t: -k3,5 -r</div><div class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</div><div class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</div><div class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</div><div class="line">bin:x:1:1:bin:/bin:/sbin/nologin</div><div class="line">root:x:0:0:root:/root:/bin/bash</div><div class="line">//这里的-k3,5表示对第3区域至第5区域间的字符串排序。</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h3><blockquote>
<p>wc 用于统计文档的行数、字符数或词数。</p>
</blockquote>
<table>
<thead>
<tr>
<th>常用选项</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>不加选项</td>
<td>依次输出文档的行数、词数和字符数</td>
</tr>
<tr>
<td>-l</td>
<td>统计行数</td>
</tr>
<tr>
<td>-m</td>
<td>统计字符数</td>
</tr>
<tr>
<td>-w</td>
<td>统计词数</td>
</tr>
</tbody>
</table>
<p>示例命令如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 ~]# wc /etc/passwd</div><div class="line">  27   47 1269 /etc/passwd</div><div class="line">[root@AmingLinux-105 ~]# wc -l /etc/passwd</div><div class="line">27 /etc/passwd</div><div class="line">[root@AmingLinux-105 ~]# wc -m /etc/passwd</div><div class="line">1269 /etc/passwd</div><div class="line">[root@AmingLinux-105 ~]# wc -w /etc/passwd</div><div class="line">47 /etc/passwd</div><div class="line">一个例子（判断文件有几行，如果行数少于3显示no）:</div><div class="line">line=`wc -l 4.txt|cut -d &apos; &apos; -f1` ; if [ $line -lt &quot;3&quot; ]; then echo &quot;no&quot;; fi</div></pre></td></tr></table></figure></p>
<h3 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h3><blockquote>
<p>uniq 用来删除重复的行</p>
</blockquote>
<p>该命令只有-c选项最常用，它表示统计重复的行数，并把行数写在最前面。使用uniq前，必须先给文件排序，否则不管用。示例如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 test]# uniq test.txt</div><div class="line">11111111111</div><div class="line">22222222222</div><div class="line">33333333333</div><div class="line"></div><div class="line">55555555555</div><div class="line">[root@AmingLinux-105 test]# sort test.txt | uniq</div><div class="line"></div><div class="line">11111111111</div><div class="line">22222222222</div><div class="line">33333333333</div><div class="line">55555555555</div><div class="line">[root@AmingLinux-105 test]# sort test.txt | uniq -c</div><div class="line">      1</div><div class="line">      1 11111111111</div><div class="line">      4 22222222222</div><div class="line">      2 33333333333</div><div class="line">      1 55555555555</div></pre></td></tr></table></figure></p>
<h3 id="tee"><a href="#tee" class="headerlink" title="tee"></a>tee</h3><blockquote>
<p>tee 命令类似于重定向&gt;，它的作用是既输出到文件，又输出到屏幕，可以叫它为”双向重定向”。</p>
</blockquote>
<p>tee 命令后面跟文件名，且它常用与管道符后面。示例如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 test]# echo &quot;aaaaaaaaaaaaaaaaaaa&quot; | tee test.txt</div><div class="line">aaaaaaaaaaaaaaaaaaa</div><div class="line">[root@AmingLinux-105 test]# cat test.txt</div><div class="line">aaaaaaaaaaaaaaaaaaa</div></pre></td></tr></table></figure></p>
<h3 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h3><blockquote>
<p>tr 用于替换字符，常用来处理文档中出现的特殊符号，如DOS文档中出现的^M。这个工具是针对一个字符来讲的，有一定的局限性。</p>
</blockquote>
<table>
<thead>
<tr>
<th>常用选项</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d</td>
<td>表示删除某个字符，后面跟要删除的字符</td>
</tr>
<tr>
<td>-s</td>
<td>表示删除重复的字符</td>
</tr>
</tbody>
</table>
<p>示例如下：</p>
<ol>
<li><p>tr 常用于把小写字母变成大写字母，如<code>tr &#39;[a-z]&#39; &#39;[A-Z]&#39;</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 test]# head -n2 /etc/passwd | tr &apos;[a-z]&apos; &apos;[A-Z]&apos;</div><div class="line">ROOT:X:0:0:ROOT:/ROOT:/BIN/BASH</div><div class="line">BIN:X:1:1:BIN:/BIN:/SBIN/NOLOGIN</div></pre></td></tr></table></figure>
</li>
<li><p>tr 还可以替换一个字符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 test]# grep &apos;root&apos; /etc/passwd | tr &apos;r&apos; &apos;R&apos;</div><div class="line">Root:x:0:0:Root:/Root:/bin/bash</div><div class="line">opeRatoR:x:11:0:opeRatoR:/Root:/sbin/nologin</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="split"><a href="#split" class="headerlink" title="split"></a>split</h3><blockquote>
<p>split 用于切割文档，常用选项为-b和-l</p>
</blockquote>
<table>
<thead>
<tr>
<th>常用选项</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-b</td>
<td>依据大小来分割文档，单位为byte</td>
</tr>
<tr>
<td>-l</td>
<td>依据行数来分割文档</td>
</tr>
</tbody>
</table>
<p>示例如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 test]# cp /etc/passwd .</div><div class="line">[root@AmingLinux-105 test]# split -b 500 passwd</div><div class="line">[root@AmingLinux-105 test]# ls</div><div class="line">1  2  3  4  passwd  test.txt  test.txt.zip  xaa  xab  xac</div></pre></td></tr></table></figure></p>
<p>如果split不指定目标文件名，则会以xaa、xab、xac….这样的文件名来存储切割后的文件。当然，也可以指定目标文件名。示例如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 test]# rm -f xa*</div><div class="line">[root@AmingLinux-105 test]# split -b 500 passwd new</div><div class="line">[root@AmingLinux-105 test]# ls</div><div class="line">1  2  3  4  newaa  newab  newac  passwd  test.txt  test.txt.zip</div><div class="line">[root@AmingLinux-105 test]# split -b 1M passwd new</div></pre></td></tr></table></figure></p>
<p>使用-l选项的示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[root@AmingLinux-105 test]# rm -f new*</div><div class="line">[root@AmingLinux-105 test]# split -l 10 passwd</div><div class="line">[root@AmingLinux-105 test]# ls</div><div class="line">1  2  3  4  passwd  test.txt  test.txt.zip  xaa  xab  xac</div><div class="line">[root@AmingLinux-105 test]# wc -l *</div><div class="line">      0 1</div><div class="line">      0 2</div><div class="line">      0 3</div><div class="line">wc: 4: 是一个目录</div><div class="line">      0 4</div><div class="line">     27 passwd</div><div class="line">      1 test.txt</div><div class="line">      0 test.txt.zip</div><div class="line">     10 xaa</div><div class="line">     10 xab</div><div class="line">      7 xac</div><div class="line">     55 总用量</div></pre></td></tr></table></figure></p>
<blockquote>
<p>结束</p>
</blockquote>
</div><div class="tags"></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2017/09/04/Vim的一些问题总结/" class="pre">Vim的一些问题总结</a><a href="/2017/08/31/CentOS软件管理/" class="next">CentOS软件管理</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell-初相识"><span class="toc-text">Shell 初相识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是Shell"><span class="toc-text">什么是Shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shell的特性"><span class="toc-text">Shell的特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#命令记录历史"><span class="toc-text">命令记录历史</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#history"><span class="toc-text">history</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#关于-的几个用法"><span class="toc-text">关于!的几个用法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#命令和文件名补全"><span class="toc-text">命令和文件名补全</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#别名"><span class="toc-text">别名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#alias-设置别名"><span class="toc-text">alias  设置别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unalias-取消别名"><span class="toc-text">unalias  取消别名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#通配符"><span class="toc-text">通配符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#输入-输出重定向"><span class="toc-text">输入/输出重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#管道符"><span class="toc-text">管道符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#作业控制"><span class="toc-text">作业控制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#变量"><span class="toc-text">变量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#echo-变量名"><span class="toc-text">echo $变量名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#env"><span class="toc-text">env</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#set-和-unset"><span class="toc-text">set 和 unset</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#export-变量名"><span class="toc-text">export 变量名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义变量"><span class="toc-text">自定义变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义变量的方式"><span class="toc-text">定义变量的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义变量的规则"><span class="toc-text">自定义变量的规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#让自定义变量一直生效"><span class="toc-text">让自定义变量一直生效</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#变量的配置文件"><span class="toc-text">变量的配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#PS1变量的说明"><span class="toc-text">PS1变量的说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell-中的特殊符号"><span class="toc-text">Shell 中的特殊符号</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#特殊符号"><span class="toc-text">特殊符号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#几个常用的管道命令"><span class="toc-text">几个常用的管道命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cut"><span class="toc-text">cut</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sort"><span class="toc-text">sort</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wc"><span class="toc-text">wc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uniq"><span class="toc-text">uniq</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tee"><span class="toc-text">tee</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tr"><span class="toc-text">tr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#split"><span class="toc-text">split</span></a></li></ol></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/12/25/入门Linux运维工程师需要学习的内容/">入门Linux运维工程师需要学习的内容</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/25/C和C-高手修炼之路/">C和C++高手修炼之路</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/19/常用便携软件/">常用便携软件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/01/Linux系统管理技巧（Aming）/">Linux系统管理技巧（Aming）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/FTP服务配置（Aming）/">FTP服务配置（Aming）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/shell脚本中的select循环/">shell脚本中的select循环</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/shell脚本基础语法/">shell脚本基础语法</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/20/NFS服务简单配置（Aming）/">NFS服务简单配置（Aming）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/18/已读书清单-武侠/">已读书清单-武侠</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/18/已读书清单-科幻/">已读书清单-科幻</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reading/">Reading</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tool/">Tool</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vim/">Vim</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Server/">服务</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/RegularExpression/">正则表达式</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zhuanzai/">转载</a><span class="category-list-count">3</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">奇怪先生theshu.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></body></html>